module.exports=[7092,a=>{"use strict";var b=a.i(80299),c=a.i(96420),d=a.i(7398),e=a.i(10693),f=a.i(10500);function g({isOpen:a,onClose:e,onSuccess:f,userId:g}){let[h,i]=(0,c.useState)("discussion"),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)("");if(!a)return null;let t=async a=>{if(a.preventDefault(),!j.trim()||!l.trim())return void s("Please fill in all required fields");q(!0),s("");try{let a=n.split(",").map(a=>a.trim()).filter(a=>a.length>0),{error:b}=await d.supabase.from("posts").insert({user_id:g,post_type:h,title:j.trim(),content:l.trim(),tags:a,community_id:null});if(b)throw b;k(""),m(""),o(""),i("discussion"),f(),e()}catch(a){console.error("Error creating post:",a),s("Failed to create post. Please try again.")}finally{q(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"relative w-full max-w-2xl mx-4 bg-white rounded-2xl shadow-2xl p-8 max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition","aria-label":"Close modal",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,b.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Create Post"}),(0,b.jsxs)("form",{onSubmit:t,className:"space-y-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Post Type"}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:()=>i("discussion"),className:`flex-1 px-4 py-3 rounded-lg border-2 text-sm font-medium transition ${"discussion"===h?"border-[#162f16] bg-[#162f16] text-white":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:"Discussion"}),(0,b.jsx)("button",{type:"button",onClick:()=>i("job_opportunity"),className:`flex-1 px-4 py-3 rounded-lg border-2 text-sm font-medium transition ${"job_opportunity"===h?"border-[#162f16] bg-[#162f16] text-white":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:"Job Opportunity"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,b.jsx)("input",{type:"text",value:j,onChange:a=>k(a.target.value),placeholder:"Enter a descriptive title",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16]",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),(0,b.jsx)("textarea",{value:l,onChange:a=>m(a.target.value),placeholder:"Share your thoughts...",rows:6,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16] resize-none",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (comma separated)"}),(0,b.jsx)("input",{type:"text",value:n,onChange:a=>o(a.target.value),placeholder:"e.g. design, career, remote",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16]"})]}),r&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:r}),(0,b.jsxs)("div",{className:"flex items-center gap-3 pt-4",children:[(0,b.jsx)("button",{type:"submit",disabled:p,className:"px-6 py-3 bg-[#162f16] text-white rounded-lg font-medium hover:bg-[#0f2310] transition disabled:opacity-50",children:p?"Posting...":"Post"}),(0,b.jsx)("button",{type:"button",onClick:e,className:"px-6 py-3 bg-white border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition",children:"Cancel"})]})]})]})})}var h=a.i(60478);function i({postId:a,currentUserId:e,onUpdate:f}){let[g,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(!1),n=(0,c.useCallback)(async()=>{try{let{data:b,error:c}=await d.supabase.from("comments").select("*").eq("post_id",a).order("created_at",{ascending:!0});if(c)throw c;let e=await Promise.all((b||[]).map(async a=>{let{data:b}=await d.supabase.auth.admin.getUserById(a.user_id);return{...a,user_name:b?.user?.user_metadata?.full_name||b?.user?.email?.split("@")[0]||"User",user_avatar:b?.user?.user_metadata?.avatar_url||""}}));i(e)}catch(a){console.error("Error loading comments:",a)}},[a]);(0,c.useEffect)(()=>{n()},[n]);let o=async b=>{if(b.preventDefault(),j.trim()){m(!0);try{let{error:b}=await d.supabase.from("comments").insert({post_id:a,user_id:e,content:j.trim()});if(b)throw b;await d.supabase.rpc("increment_comments",{post_id:a}),k(""),n(),f()}catch(a){console.error("Error posting comment:",a)}finally{m(!1)}}};return(0,b.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,b.jsx)("div",{className:"space-y-4 mb-4",children:g.map(a=>{let c,d,e,f;return(0,b.jsxs)("div",{className:"flex gap-3",children:[a.user_avatar?(0,b.jsx)(h.default,{src:a.user_avatar,alt:a.user_name,width:32,height:32,className:"rounded-full object-cover"}):(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#162f16] text-white flex items-center justify-center text-sm font-semibold",children:a.user_name.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,b.jsx)("p",{className:"font-medium text-sm text-gray-900",children:a.user_name}),(0,b.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:a.content})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1 ml-3",children:(c=new Date(a.created_at),f=Math.floor((e=Math.floor((d=Math.floor((new Date().getTime()-c.getTime())/6e4))/60))/24),d<1?"Just now":d<60?`${d}m ago`:e<24?`${e}h ago`:`${f}d ago`)})]})]},a.id)})}),(0,b.jsxs)("form",{onSubmit:o,className:"flex gap-3",children:[(0,b.jsx)("input",{type:"text",value:j,onChange:a=>k(a.target.value),placeholder:"Write a comment...",className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm"}),(0,b.jsx)("button",{type:"submit",disabled:l||!j.trim(),className:"px-4 py-2 bg-[#162f16] text-white rounded-lg text-sm font-medium hover:bg-[#0f2310] transition disabled:opacity-50",children:l?"Posting...":"Post"})]})]})}function j({post:a,currentUserId:e,onUpdate:f}){let g,j,k,[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1),v=a.user_id===e,w=async()=>{if(!n){o(!0);try{a.is_liked?(await d.supabase.from("post_likes").delete().eq("post_id",a.id).eq("user_id",e),await d.supabase.rpc("decrement_likes",{post_id:a.id})):(await d.supabase.from("post_likes").insert({post_id:a.id,user_id:e}),await d.supabase.rpc("increment_likes",{post_id:a.id})),f()}catch(a){console.error("Error toggling like:",a)}finally{o(!1)}}},x=async b=>{if(!p&&a.event){q(!0);try{let c=a.event.id;if(a.event.user_rsvp===b){await d.supabase.from("event_rsvps").delete().eq("event_id",c).eq("user_id",e);let f="going"===b?"going_count":"interested_count";await d.supabase.from("events").update({[f]:Math.max(0,a.event[f]-1)}).eq("id",c)}else if(await d.supabase.from("event_rsvps").upsert({event_id:c,user_id:e,status:b}),a.event.user_rsvp){let e="going"===a.event.user_rsvp?"going_count":"interested_count",f="going"===b?"going_count":"interested_count";await d.supabase.from("events").update({[e]:Math.max(0,a.event[e]-1),[f]:a.event[f]+1}).eq("id",c)}else{let e="going"===b?"going_count":"interested_count";await d.supabase.from("events").update({[e]:a.event[e]+1}).eq("id",c)}f()}catch(a){console.error("Error updating RSVP:",a)}finally{q(!1)}}},y=async()=>{if(!r){s(!0);try{let{error:b}=await d.supabase.from("posts").delete().eq("id",a.id).eq("user_id",e);if(b)throw b;f(),u(!1)}catch(a){console.error("Error deleting post:",a),alert("Failed to delete post. Please try again.")}finally{s(!1)}}};return(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 hover:shadow-md transition",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[a.user_avatar?(0,b.jsx)(h.default,{src:a.user_avatar,alt:a.user_name,width:40,height:40,className:"rounded-full object-cover"}):(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-[#162f16] text-white flex items-center justify-center font-semibold",children:a.user_name.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.user_name}),a.user_occupation&&(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.user_occupation}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:(g=new Date(a.created_at),k=Math.floor((j=Math.floor((new Date().getTime()-g.getTime())/36e5))/24),j<1?"Just now":j<24?`${j}h ago`:k<7?`${k}d ago`:g.toLocaleDateString())})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${(()=>{switch(a.post_type){case"discussion":return"bg-blue-100 text-blue-800";case"job_opportunity":return"bg-green-100 text-green-800";case"event":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}})()}`,children:a.post_type.replace("_"," ")}),v&&(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("button",{onClick:()=>u(!t),className:"p-2 text-gray-400 hover:text-red-600 transition","aria-label":"Delete post",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),t&&(0,b.jsxs)("div",{className:"absolute right-0 top-10 bg-white rounded-lg shadow-lg border border-gray-200 p-4 z-10 w-64",children:[(0,b.jsx)("p",{className:"text-sm text-gray-700 mb-3",children:"Are you sure you want to delete this post?"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:y,disabled:r,className:"flex-1 px-3 py-2 bg-red-600 text-white rounded-md text-sm font-medium hover:bg-red-700 transition disabled:opacity-50",children:r?"Deleting...":"Delete"}),(0,b.jsx)("button",{onClick:()=>u(!1),className:"flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-md text-sm font-medium hover:bg-gray-200 transition",children:"Cancel"})]})]})]})]})]}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:a.title}),(0,b.jsx)("p",{className:"text-gray-700 mb-4 whitespace-pre-wrap",children:a.content}),a.event&&(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 border border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700 mb-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,b.jsx)("span",{className:"font-medium",children:new Date(a.event.event_date).toLocaleString()})]}),a.event.location&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700 mb-2",children:[(0,b.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,b.jsx)("span",{children:a.event.location})]}),a.event.meeting_link&&(0,b.jsxs)("a",{href:a.event.meeting_link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-[#162f16] hover:underline mb-3",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),(0,b.jsx)("span",{children:"Join Meeting"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("button",{onClick:()=>x("going"),disabled:p,className:`px-4 py-2 rounded-lg text-sm font-medium transition ${"going"===a.event.user_rsvp?"bg-[#162f16] text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:["Going (",a.event.going_count,")"]}),(0,b.jsxs)("button",{onClick:()=>x("interested"),disabled:p,className:`px-4 py-2 rounded-lg text-sm font-medium transition ${"interested"===a.event.user_rsvp?"bg-[#162f16] text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:["Interested (",a.event.interested_count,")"]})]})]}),a.tags&&a.tags.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:a.tags.map((a,c)=>(0,b.jsxs)("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-medium",children:["#",a]},c))}),(0,b.jsxs)("div",{className:"flex items-center gap-6 pt-4 border-t border-gray-200",children:[(0,b.jsxs)("button",{onClick:w,disabled:n,className:"flex items-center gap-2 text-gray-600 hover:text-[#162f16] transition",children:[(0,b.jsx)("svg",{className:`w-5 h-5 ${a.is_liked?"fill-[#162f16] text-[#162f16]":"fill-none"}`,stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,b.jsx)("span",{className:"text-sm font-medium",children:a.likes_count})]}),(0,b.jsxs)("button",{onClick:()=>m(!l),className:"flex items-center gap-2 text-gray-600 hover:text-[#162f16] transition",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,b.jsx)("span",{className:"text-sm font-medium",children:a.comments_count})]}),(0,b.jsxs)("button",{onClick:()=>{let b=`${window.location.origin}/community?post=${a.id}`;navigator.clipboard.writeText(b),alert("Link copied to clipboard!")},className:"flex items-center gap-2 text-gray-600 hover:text-[#162f16] transition",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Share"})]})]}),l&&(0,b.jsx)(i,{postId:a.id,currentUserId:e,onUpdate:f})]})}function k({isOpen:a,onClose:e,onSuccess:f,userId:g}){let[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)("");if(!a)return null;let z=async a=>{if(a.preventDefault(),!h.trim()||!j.trim()||!l||!n)return void y("Please fill in all required fields");w(!0),y("");try{let a=t.split(",").map(a=>a.trim()).filter(a=>a.length>0),b=new Date(`${l}T${n}`).toISOString(),{data:c,error:v}=await d.supabase.from("posts").insert({user_id:g,post_type:"event",title:h.trim(),content:j.trim(),tags:a,community_id:null}).select().single();if(v)throw v;let{error:w}=await d.supabase.from("events").insert({post_id:c.id,event_date:b,location:p.trim()||null,meeting_link:r.trim()||null});if(w)throw w;i(""),k(""),m(""),o(""),q(""),s(""),u(""),f(),e()}catch(a){console.error("Error creating event:",a),y("Failed to create event. Please try again.")}finally{w(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"relative w-full max-w-2xl mx-4 bg-white rounded-2xl shadow-2xl p-8 max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition","aria-label":"Close modal",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,b.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Create Event"}),(0,b.jsxs)("form",{onSubmit:z,className:"space-y-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Title *"}),(0,b.jsx)("input",{type:"text",value:h,onChange:a=>i(a.target.value),placeholder:"Enter event title",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16]",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,b.jsx)("textarea",{value:j,onChange:a=>k(a.target.value),placeholder:"Describe your event...",rows:4,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16] resize-none",required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),(0,b.jsx)("input",{type:"date",value:l,onChange:a=>m(a.target.value),className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16]",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time *"}),(0,b.jsx)("input",{type:"time",value:n,onChange:a=>o(a.target.value),className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16]",required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location (optional)"}),(0,b.jsx)("input",{type:"text",value:p,onChange:a=>q(a.target.value),placeholder:"e.g. London, UK or Virtual",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meeting Link (optional)"}),(0,b.jsx)("input",{type:"url",value:r,onChange:a=>s(a.target.value),placeholder:"https://zoom.us/... or https://meet.google.com/...",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (comma separated)"}),(0,b.jsx)("input",{type:"text",value:t,onChange:a=>u(a.target.value),placeholder:"e.g. networking, workshop, career",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16]"})]}),x&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:x}),(0,b.jsxs)("div",{className:"flex items-center gap-3 pt-4",children:[(0,b.jsx)("button",{type:"submit",disabled:v,className:"px-6 py-3 bg-[#162f16] text-white rounded-lg font-medium hover:bg-[#0f2310] transition disabled:opacity-50",children:v?"Creating...":"Create Event"}),(0,b.jsx)("button",{type:"button",onClick:e,className:"px-6 py-3 bg-white border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition",children:"Cancel"})]})]})]})})}function l(){let a,h=(0,e.useRouter)(),[i,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)("feed"),[y,z]=(0,c.useState)("all"),[A,B]=(0,c.useState)("latest"),[C,D]=(0,c.useState)([]),E=(0,c.useCallback)(async()=>{let{data:{user:a}}=await d.supabase.auth.getUser();a?(l(a),n(!1)):h.push("/")},[h]),F=(0,c.useCallback)(async()=>{if(i)try{let a=d.supabase.from("posts").select(`
          *,
          post_likes!left(user_id),
          events!left(*)
        `);a="latest"===A?a.order("created_at",{ascending:!1}):a.order("likes_count",{ascending:!1});let{data:b,error:c}=await a;if(c)throw c;let e=await Promise.all((b||[]).map(async a=>{let{data:b}=await d.supabase.from("profiles").select("full_name, avatar_url, occupation").eq("id",a.user_id).single(),c=a.post_likes?.some(a=>a.user_id===i?.id)||!1,e=null;if("event"===a.post_type&&a.events&&a.events.length>0){let b=a.events[0],{data:c}=await d.supabase.from("event_rsvps").select("status").eq("event_id",b.id).eq("user_id",i?.id).single();e={...b,user_rsvp:c?.status||null}}return{...a,user_name:b?.full_name||"User",user_avatar:b?.avatar_url||"",user_occupation:b?.occupation||"",is_liked:c,event:e}}));p(e)}catch(a){console.error("Error loading posts:",a)}},[i,A]),G=(0,c.useCallback)(()=>{let a=[...o];"events"===w&&(a=a.filter(a=>"event"===a.post_type)),"all"!==y&&(a=a.filter(a=>a.post_type===y)),C.length>0&&(a=a.filter(a=>a.tags&&a.tags.some(a=>C.includes(a)))),r(a)},[o,w,y,C]);return((0,c.useEffect)(()=>{E()},[E]),(0,c.useEffect)(()=>{F()},[F]),(0,c.useEffect)(()=>{G()},[G]),m)?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("p",{className:"text-gray-600",children:"Loading..."})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)(f.default,{onAuthClick:()=>{h.push("/")}}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-4xl font-regular text-gray-900 mb-2",children:"Community"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Connect, share, and grow with fellow professionals"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-6 border-b border-gray-200",children:[(0,b.jsx)("button",{onClick:()=>x("feed"),className:`pb-3 px-4 font-medium transition ${"feed"===w?"text-[#162f16] border-b-2 border-[#162f16]":"text-gray-600 hover:text-gray-900"}`,children:"Live Feed"}),(0,b.jsx)("button",{onClick:()=>x("events"),className:`pb-3 px-4 font-medium transition ${"events"===w?"text-[#162f16] border-b-2 border-[#162f16]":"text-gray-600 hover:text-gray-900"}`,children:"Events"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 sticky top-6",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Filters"}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("p",{className:"text-sm text-gray-700 mb-2 font-medium",children:"Post Type"}),(0,b.jsx)("div",{className:"space-y-2",children:["all","discussion","job_opportunity","event"].map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"radio",name:"postType",checked:y===a,onChange:()=>z(a),className:"w-4 h-4 text-[#162f16]"}),(0,b.jsx)("span",{className:"text-sm text-gray-700 capitalize",children:a.replace("_"," ")})]},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-700 mb-2 font-medium",children:"Tags"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:(a=new Set,o.forEach(b=>{b.tags&&b.tags.forEach(b=>a.add(b))}),Array.from(a)).map(a=>(0,b.jsxs)("button",{onClick:()=>{D(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},className:`px-3 py-1 rounded-full text-xs font-medium transition ${C.includes(a)?"bg-[#162f16] text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["#",a]},a))})]})]})}),(0,b.jsxs)("div",{className:"lg:col-span-3",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl p-4 mb-6 border border-gray-200 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("button",{onClick:()=>t(!0),className:"px-4 py-2 bg-[#162f16] text-white rounded-md text-sm font-medium hover:bg-[#0f2310] transition",children:"Create Post"}),"events"===w&&(0,b.jsx)("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md text-sm font-medium hover:bg-gray-50 transition",children:"Create Event"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Sort by:"}),(0,b.jsxs)("select",{value:A,onChange:a=>B(a.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-[#162f16]",children:[(0,b.jsx)("option",{value:"latest",children:"Latest"}),(0,b.jsx)("option",{value:"top",children:"Top"})]})]})]}),(0,b.jsx)("div",{className:"space-y-4",children:0===q.length?(0,b.jsx)("div",{className:"bg-white rounded-xl p-12 text-center border border-gray-200",children:(0,b.jsx)("p",{className:"text-gray-600",children:"No posts found. Be the first to post!"})}):q.map(a=>(0,b.jsx)(j,{post:a,currentUserId:i?.id||"",onUpdate:F},a.id))})]})]})]}),(0,b.jsx)(g,{isOpen:s,onClose:()=>t(!1),onSuccess:F,userId:i?.id||""}),(0,b.jsx)(k,{isOpen:u,onClose:()=>v(!1),onSuccess:F,userId:i?.id||""})]})}a.s(["default",()=>l],7092)}];

//# sourceMappingURL=Desktop_Progrize_landing-main_app_community_page_tsx_1a7e91b1._.js.map