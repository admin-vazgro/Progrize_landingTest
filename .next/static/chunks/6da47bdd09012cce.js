(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,565,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},70511,e=>{e.v("/_next/static/media/logo.70795ee8.svg")},68600,e=>{"use strict";var t=e.i(63286),s=e.i(68411),r=e.i(81852),a=e.i(34781),n=e.i(47317);function i({isOpen:e,onClose:a,onSuccess:n,userId:i}){let[l,o]=(0,s.useState)("discussion"),[d,c]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[x,g]=(0,s.useState)(""),[p,h]=(0,s.useState)(!1),[f,b]=(0,s.useState)("");if(!e)return null;let v=async e=>{if(e.preventDefault(),!d.trim()||!u.trim())return void b("Please fill in all required fields");h(!0),b("");try{let e=x.split(",").map(e=>e.trim()).filter(e=>e.length>0),{error:t}=await r.supabase.from("posts").insert({user_id:i,post_type:l,title:d.trim(),content:u.trim(),tags:e,community_id:null});if(t)throw t;c(""),m(""),g(""),o("discussion"),n(),a()}catch(e){console.error("Error creating post:",e),b("Failed to create post. Please try again.")}finally{h(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"relative w-full max-w-2xl mx-4 bg-white rounded-2xl shadow-2xl p-8 max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)("button",{onClick:a,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition","aria-label":"Close modal",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,t.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Create Post"}),(0,t.jsxs)("form",{onSubmit:v,className:"space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Post Type"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>o("discussion"),className:`flex-1 px-4 py-3 rounded-lg border-2 text-sm font-medium transition ${"discussion"===l?"border-[#162f16] bg-[#162f16] text-white":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:"Discussion"}),(0,t.jsx)("button",{type:"button",onClick:()=>o("job_opportunity"),className:`flex-1 px-4 py-3 rounded-lg border-2 text-sm font-medium transition ${"job_opportunity"===l?"border-[#162f16] bg-[#162f16] text-white":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:"Job Opportunity"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,t.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),placeholder:"Enter a descriptive title",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16]",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),(0,t.jsx)("textarea",{value:u,onChange:e=>m(e.target.value),placeholder:"Share your thoughts...",rows:6,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16] resize-none",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (comma separated)"}),(0,t.jsx)("input",{type:"text",value:x,onChange:e=>g(e.target.value),placeholder:"e.g. design, career, remote",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16]"})]}),f&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:f}),(0,t.jsxs)("div",{className:"flex items-center gap-3 pt-4",children:[(0,t.jsx)("button",{type:"submit",disabled:p,className:"px-6 py-3 bg-[#162f16] text-white rounded-lg font-medium hover:bg-[#0f2310] transition disabled:opacity-50",children:p?"Posting...":"Post"}),(0,t.jsx)("button",{type:"button",onClick:a,className:"px-6 py-3 bg-white border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition",children:"Cancel"})]})]})]})})}var l=e.i(30721);function o({postId:e,currentUserId:a,onUpdate:n}){let[i,o]=(0,s.useState)([]),[d,c]=(0,s.useState)(""),[u,m]=(0,s.useState)(!1),x=(0,s.useCallback)(async()=>{try{let{data:t,error:s}=await r.supabase.from("comments").select("*").eq("post_id",e).order("created_at",{ascending:!0});if(s)throw s;let a=await Promise.all((t||[]).map(async e=>{let{data:t}=await r.supabase.auth.admin.getUserById(e.user_id);return{...e,user_name:t?.user?.user_metadata?.full_name||t?.user?.email?.split("@")[0]||"User",user_avatar:t?.user?.user_metadata?.avatar_url||""}}));o(a)}catch(e){console.error("Error loading comments:",e)}},[e]);(0,s.useEffect)(()=>{x()},[x]);let g=async t=>{if(t.preventDefault(),d.trim()){m(!0);try{let{error:t}=await r.supabase.from("comments").insert({post_id:e,user_id:a,content:d.trim()});if(t)throw t;await r.supabase.rpc("increment_comments",{post_id:e}),c(""),x(),n()}catch(e){console.error("Error posting comment:",e)}finally{m(!1)}}};return(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,t.jsx)("div",{className:"space-y-4 mb-4",children:i.map(e=>{let s,r,a,n;return(0,t.jsxs)("div",{className:"flex gap-3",children:[e.user_avatar?(0,t.jsx)(l.default,{src:e.user_avatar,alt:e.user_name,width:32,height:32,className:"rounded-full object-cover"}):(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#162f16] text-white flex items-center justify-center text-sm font-semibold",children:e.user_name.charAt(0).toUpperCase()}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"font-medium text-sm text-gray-900",children:e.user_name}),(0,t.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:e.content})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1 ml-3",children:(s=new Date(e.created_at),n=Math.floor((a=Math.floor((r=Math.floor((new Date().getTime()-s.getTime())/6e4))/60))/24),r<1?"Just now":r<60?`${r}m ago`:a<24?`${a}h ago`:`${n}d ago`)})]})]},e.id)})}),(0,t.jsxs)("form",{onSubmit:g,className:"flex gap-3",children:[(0,t.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),placeholder:"Write a comment...",className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm"}),(0,t.jsx)("button",{type:"submit",disabled:u||!d.trim(),className:"px-4 py-2 bg-[#162f16] text-white rounded-lg text-sm font-medium hover:bg-[#0f2310] transition disabled:opacity-50",children:u?"Posting...":"Post"})]})]})}function d({post:e,currentUserId:a,onUpdate:n}){let i,d,c,[u,m]=(0,s.useState)(!1),[x,g]=(0,s.useState)(!1),[p,h]=(0,s.useState)(!1),[f,b]=(0,s.useState)(!1),[v,y]=(0,s.useState)(!1),j=e.user_id===a,N=async()=>{if(!x){g(!0);try{e.is_liked?(await r.supabase.from("post_likes").delete().eq("post_id",e.id).eq("user_id",a),await r.supabase.rpc("decrement_likes",{post_id:e.id})):(await r.supabase.from("post_likes").insert({post_id:e.id,user_id:a}),await r.supabase.rpc("increment_likes",{post_id:e.id})),n()}catch(e){console.error("Error toggling like:",e)}finally{g(!1)}}},w=async t=>{if(!p&&e.event){h(!0);try{let s=e.event.id;if(e.event.user_rsvp===t){await r.supabase.from("event_rsvps").delete().eq("event_id",s).eq("user_id",a);let n="going"===t?"going_count":"interested_count";await r.supabase.from("events").update({[n]:Math.max(0,e.event[n]-1)}).eq("id",s)}else if(await r.supabase.from("event_rsvps").upsert({event_id:s,user_id:a,status:t}),e.event.user_rsvp){let a="going"===e.event.user_rsvp?"going_count":"interested_count",n="going"===t?"going_count":"interested_count";await r.supabase.from("events").update({[a]:Math.max(0,e.event[a]-1),[n]:e.event[n]+1}).eq("id",s)}else{let a="going"===t?"going_count":"interested_count";await r.supabase.from("events").update({[a]:e.event[a]+1}).eq("id",s)}n()}catch(e){console.error("Error updating RSVP:",e)}finally{h(!1)}}},_=async()=>{if(!f){b(!0);try{let{error:t}=await r.supabase.from("posts").delete().eq("id",e.id).eq("user_id",a);if(t)throw t;n(),y(!1)}catch(e){console.error("Error deleting post:",e),alert("Failed to delete post. Please try again.")}finally{b(!1)}}};return(0,t.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 hover:shadow-md transition",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[e.user_avatar?(0,t.jsx)(l.default,{src:e.user_avatar,alt:e.user_name,width:40,height:40,className:"rounded-full object-cover"}):(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-[#162f16] text-white flex items-center justify-center font-semibold",children:e.user_name.charAt(0).toUpperCase()}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.user_name}),e.user_occupation&&(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.user_occupation}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:(i=new Date(e.created_at),c=Math.floor((d=Math.floor((new Date().getTime()-i.getTime())/36e5))/24),d<1?"Just now":d<24?`${d}h ago`:c<7?`${c}d ago`:i.toLocaleDateString())})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${(()=>{switch(e.post_type){case"discussion":return"bg-blue-100 text-blue-800";case"job_opportunity":return"bg-green-100 text-green-800";case"event":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}})()}`,children:e.post_type.replace("_"," ")}),j&&(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{onClick:()=>y(!v),className:"p-2 text-gray-400 hover:text-red-600 transition","aria-label":"Delete post",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),v&&(0,t.jsxs)("div",{className:"absolute right-0 top-10 bg-white rounded-lg shadow-lg border border-gray-200 p-4 z-10 w-64",children:[(0,t.jsx)("p",{className:"text-sm text-gray-700 mb-3",children:"Are you sure you want to delete this post?"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:_,disabled:f,className:"flex-1 px-3 py-2 bg-red-600 text-white rounded-md text-sm font-medium hover:bg-red-700 transition disabled:opacity-50",children:f?"Deleting...":"Delete"}),(0,t.jsx)("button",{onClick:()=>y(!1),className:"flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-md text-sm font-medium hover:bg-gray-200 transition",children:"Cancel"})]})]})]})]})]}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.title}),(0,t.jsx)("p",{className:"text-gray-700 mb-4 whitespace-pre-wrap",children:e.content}),e.event&&(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700 mb-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsx)("span",{className:"font-medium",children:new Date(e.event.event_date).toLocaleString()})]}),e.event.location&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700 mb-2",children:[(0,t.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,t.jsx)("span",{children:e.event.location})]}),e.event.meeting_link&&(0,t.jsxs)("a",{href:e.event.meeting_link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-[#162f16] hover:underline mb-3",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),(0,t.jsx)("span",{children:"Join Meeting"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("button",{onClick:()=>w("going"),disabled:p,className:`px-4 py-2 rounded-lg text-sm font-medium transition ${"going"===e.event.user_rsvp?"bg-[#162f16] text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:["Going (",e.event.going_count,")"]}),(0,t.jsxs)("button",{onClick:()=>w("interested"),disabled:p,className:`px-4 py-2 rounded-lg text-sm font-medium transition ${"interested"===e.event.user_rsvp?"bg-[#162f16] text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:["Interested (",e.event.interested_count,")"]})]})]}),e.tags&&e.tags.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:e.tags.map((e,s)=>(0,t.jsxs)("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-medium",children:["#",e]},s))}),(0,t.jsxs)("div",{className:"flex items-center gap-6 pt-4 border-t border-gray-200",children:[(0,t.jsxs)("button",{onClick:N,disabled:x,className:"flex items-center gap-2 text-gray-600 hover:text-[#162f16] transition",children:[(0,t.jsx)("svg",{className:`w-5 h-5 ${e.is_liked?"fill-[#162f16] text-[#162f16]":"fill-none"}`,stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,t.jsx)("span",{className:"text-sm font-medium",children:e.likes_count})]}),(0,t.jsxs)("button",{onClick:()=>m(!u),className:"flex items-center gap-2 text-gray-600 hover:text-[#162f16] transition",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,t.jsx)("span",{className:"text-sm font-medium",children:e.comments_count})]}),(0,t.jsxs)("button",{onClick:()=>{let t=`${window.location.origin}/community?post=${e.id}`;navigator.clipboard.writeText(t),alert("Link copied to clipboard!")},className:"flex items-center gap-2 text-gray-600 hover:text-[#162f16] transition",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Share"})]})]}),u&&(0,t.jsx)(o,{postId:e.id,currentUserId:a,onUpdate:n})]})}function c({isOpen:e,onClose:a,onSuccess:n,userId:i}){let[l,o]=(0,s.useState)(""),[d,c]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[x,g]=(0,s.useState)(""),[p,h]=(0,s.useState)(""),[f,b]=(0,s.useState)(""),[v,y]=(0,s.useState)(""),[j,N]=(0,s.useState)(!1),[w,_]=(0,s.useState)("");if(!e)return null;let k=async e=>{if(e.preventDefault(),!l.trim()||!d.trim()||!u||!x)return void _("Please fill in all required fields");N(!0),_("");try{let e=v.split(",").map(e=>e.trim()).filter(e=>e.length>0),t=new Date(`${u}T${x}`).toISOString(),{data:s,error:j}=await r.supabase.from("posts").insert({user_id:i,post_type:"event",title:l.trim(),content:d.trim(),tags:e,community_id:null}).select().single();if(j)throw j;let{error:N}=await r.supabase.from("events").insert({post_id:s.id,event_date:t,location:p.trim()||null,meeting_link:f.trim()||null});if(N)throw N;o(""),c(""),m(""),g(""),h(""),b(""),y(""),n(),a()}catch(e){console.error("Error creating event:",e),_("Failed to create event. Please try again.")}finally{N(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"relative w-full max-w-2xl mx-4 bg-white rounded-2xl shadow-2xl p-8 max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)("button",{onClick:a,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition","aria-label":"Close modal",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,t.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Create Event"}),(0,t.jsxs)("form",{onSubmit:k,className:"space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Title *"}),(0,t.jsx)("input",{type:"text",value:l,onChange:e=>o(e.target.value),placeholder:"Enter event title",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16]",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,t.jsx)("textarea",{value:d,onChange:e=>c(e.target.value),placeholder:"Describe your event...",rows:4,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16] resize-none",required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),(0,t.jsx)("input",{type:"date",value:u,onChange:e=>m(e.target.value),className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16]",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time *"}),(0,t.jsx)("input",{type:"time",value:x,onChange:e=>g(e.target.value),className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16]",required:!0})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location (optional)"}),(0,t.jsx)("input",{type:"text",value:p,onChange:e=>h(e.target.value),placeholder:"e.g. London, UK or Virtual",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16]"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meeting Link (optional)"}),(0,t.jsx)("input",{type:"url",value:f,onChange:e=>b(e.target.value),placeholder:"https://zoom.us/... or https://meet.google.com/...",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16]"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (comma separated)"}),(0,t.jsx)("input",{type:"text",value:v,onChange:e=>y(e.target.value),placeholder:"e.g. networking, workshop, career",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16]"})]}),w&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:w}),(0,t.jsxs)("div",{className:"flex items-center gap-3 pt-4",children:[(0,t.jsx)("button",{type:"submit",disabled:j,className:"px-6 py-3 bg-[#162f16] text-white rounded-lg font-medium hover:bg-[#0f2310] transition disabled:opacity-50",children:j?"Creating...":"Create Event"}),(0,t.jsx)("button",{type:"button",onClick:a,className:"px-6 py-3 bg-white border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition",children:"Cancel"})]})]})]})})}function u(){let e,l=(0,a.useRouter)(),[o,u]=(0,s.useState)(null),[m,x]=(0,s.useState)(!0),[g,p]=(0,s.useState)([]),[h,f]=(0,s.useState)([]),[b,v]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)("feed"),[_,k]=(0,s.useState)("all"),[C,S]=(0,s.useState)("latest"),[L,M]=(0,s.useState)([]),q=(0,s.useCallback)(async()=>{let{data:{user:e}}=await r.supabase.auth.getUser();e?(u(e),x(!1)):l.push("/")},[l]),E=(0,s.useCallback)(async()=>{if(o)try{let e=r.supabase.from("posts").select(`
          *,
          post_likes!left(user_id),
          events!left(*)
        `);e="latest"===C?e.order("created_at",{ascending:!1}):e.order("likes_count",{ascending:!1});let{data:t,error:s}=await e;if(s)throw s;let a=await Promise.all((t||[]).map(async e=>{let{data:t}=await r.supabase.from("profiles").select("full_name, avatar_url, occupation").eq("id",e.user_id).single(),s=e.post_likes?.some(e=>e.user_id===o?.id)||!1,a=null;if("event"===e.post_type&&e.events&&e.events.length>0){let t=e.events[0],{data:s}=await r.supabase.from("event_rsvps").select("status").eq("event_id",t.id).eq("user_id",o?.id).single();a={...t,user_rsvp:s?.status||null}}return{...e,user_name:t?.full_name||"User",user_avatar:t?.avatar_url||"",user_occupation:t?.occupation||"",is_liked:s,event:a}}));p(a)}catch(e){console.error("Error loading posts:",e)}},[o,C]),P=(0,s.useCallback)(()=>{let e=[...g];"events"===N&&(e=e.filter(e=>"event"===e.post_type)),"all"!==_&&(e=e.filter(e=>e.post_type===_)),L.length>0&&(e=e.filter(e=>e.tags&&e.tags.some(e=>L.includes(e)))),f(e)},[g,N,_,L]);return((0,s.useEffect)(()=>{q()},[q]),(0,s.useEffect)(()=>{E()},[E]),(0,s.useEffect)(()=>{P()},[P]),m)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-gray-600",children:"Loading..."})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(n.default,{onAuthClick:()=>{l.push("/")}}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-regular text-gray-900 mb-2",children:"Community"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Connect, share, and grow with fellow professionals"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-6 border-b border-gray-200",children:[(0,t.jsx)("button",{onClick:()=>w("feed"),className:`pb-3 px-4 font-medium transition ${"feed"===N?"text-[#162f16] border-b-2 border-[#162f16]":"text-gray-600 hover:text-gray-900"}`,children:"Live Feed"}),(0,t.jsx)("button",{onClick:()=>w("events"),className:`pb-3 px-4 font-medium transition ${"events"===N?"text-[#162f16] border-b-2 border-[#162f16]":"text-gray-600 hover:text-gray-900"}`,children:"Events"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 sticky top-6",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Filters"}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("p",{className:"text-sm text-gray-700 mb-2 font-medium",children:"Post Type"}),(0,t.jsx)("div",{className:"space-y-2",children:["all","discussion","job_opportunity","event"].map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",name:"postType",checked:_===e,onChange:()=>k(e),className:"w-4 h-4 text-[#162f16]"}),(0,t.jsx)("span",{className:"text-sm text-gray-700 capitalize",children:e.replace("_"," ")})]},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-700 mb-2 font-medium",children:"Tags"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:(e=new Set,g.forEach(t=>{t.tags&&t.tags.forEach(t=>e.add(t))}),Array.from(e)).map(e=>(0,t.jsxs)("button",{onClick:()=>{M(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:`px-3 py-1 rounded-full text-xs font-medium transition ${L.includes(e)?"bg-[#162f16] text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["#",e]},e))})]})]})}),(0,t.jsxs)("div",{className:"lg:col-span-3",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl p-4 mb-6 border border-gray-200 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-[#162f16] text-white rounded-md text-sm font-medium hover:bg-[#0f2310] transition",children:"Create Post"}),"events"===N&&(0,t.jsx)("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md text-sm font-medium hover:bg-gray-50 transition",children:"Create Event"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Sort by:"}),(0,t.jsxs)("select",{value:C,onChange:e=>S(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-[#162f16]",children:[(0,t.jsx)("option",{value:"latest",children:"Latest"}),(0,t.jsx)("option",{value:"top",children:"Top"})]})]})]}),(0,t.jsx)("div",{className:"space-y-4",children:0===h.length?(0,t.jsx)("div",{className:"bg-white rounded-xl p-12 text-center border border-gray-200",children:(0,t.jsx)("p",{className:"text-gray-600",children:"No posts found. Be the first to post!"})}):h.map(e=>(0,t.jsx)(d,{post:e,currentUserId:o?.id||"",onUpdate:E},e.id))})]})]})]}),(0,t.jsx)(i,{isOpen:b,onClose:()=>v(!1),onSuccess:E,userId:o?.id||""}),(0,t.jsx)(c,{isOpen:y,onClose:()=>j(!1),onSuccess:E,userId:o?.id||""})]})}e.s(["default",()=>u],68600)}]);