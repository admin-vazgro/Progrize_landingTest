"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[383],{909:(e,t,a)=>{a.d(t,{A:()=>u});var r=a(5155),n=a(2115),s=a(1142),i=a(5772),o=a(3137);function l({isOpen:e,onClose:t,experience:a,onSuccess:i}){let[l,d]=(0,n.useState)(!1),[c,u]=(0,n.useState)({company_name:"",position:"",location:"",start_date:"",end_date:"",is_current:!1,description:"",hr_email:""}),[m,x]=(0,n.useState)({}),[g,f]=(0,n.useState)([]),[h,p]=(0,n.useState)([]),[y,b]=(0,n.useState)([]),[v,j]=(0,n.useState)(!1),[_,w]=(0,n.useState)(!1),[N,C]=(0,n.useState)(!1),[S,k]=(0,n.useState)(!1);(0,n.useEffect)(()=>{a&&u({company_name:a.company_name||"",position:a.position||"",location:a.location||"",start_date:a.start_date||"",end_date:a.end_date||"",is_current:a.is_current||!1,description:a.description||"",hr_email:a.hr_email||""})},[a]);let D=async e=>{let r,n,o,l;if(e.preventDefault(),r={},n=new Date,o=new Date(c.start_date),l=c.end_date?new Date(c.end_date):null,o>n&&(r.start_date="Start date cannot be in the future"),l&&l<o&&(r.end_date="End date cannot be before start date"),l&&l>n&&!c.is_current&&(r.end_date="End date cannot be in the future"),x(r),0===Object.keys(r).length){d(!0);try{let{error:e}=await s.N.from("experiences").update({company_name:c.company_name,position:c.position,location:c.location,start_date:c.start_date,end_date:c.is_current?null:c.end_date,is_current:c.is_current,description:c.description,hr_email:c.hr_email}).eq("id",a.id);if(e)throw e;i(),t(),x({})}catch(e){console.error("Error updating experience:",e),alert("Failed to update experience. Please try again.")}finally{d(!1)}}};return e?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Experience"}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("form",{onSubmit:D,className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Position *"}),(0,r.jsx)("input",{type:"text",required:!0,value:c.position,onChange:e=>{var t;return t=e.target.value,void(u({...c,position:t}),t.trim()?(f(o.s_.filter(e=>e.toLowerCase().includes(t.toLowerCase())).slice(0,10)),j(!0)):j(!1))},onFocus:()=>c.position&&j(!0),onBlur:()=>setTimeout(()=>j(!1),200),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Start typing position..."}),v&&g.length>0&&(0,r.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:g.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{u({...c,position:e}),j(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm",children:e},e))})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name *"}),(0,r.jsx)("input",{type:"text",required:!0,value:c.company_name,onChange:e=>(e=>{if(u({...c,company_name:e}),e.trim()){let t=o.wl.filter(t=>t.toLowerCase().includes(e.toLowerCase())).slice(0,10);p(t),w(!0),k(0===t.length||!t.some(t=>t.toLowerCase()===e.toLowerCase()))}else w(!1),k(!1)})(e.target.value),onFocus:()=>c.company_name&&w(!0),onBlur:()=>setTimeout(()=>w(!1),200),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Start typing company name..."}),_&&(0,r.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[h.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{u({...c,company_name:e}),w(!1),k(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm",children:e},e)),S&&(0,r.jsxs)("button",{type:"button",onClick:()=>{w(!1),k(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm text-[#162f16] font-medium border-t border-gray-200",children:['+ Add "',c.company_name,'"']})]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),(0,r.jsx)("input",{type:"text",value:c.location,onChange:e=>{var t;return t=e.target.value,void(u({...c,location:t}),t.trim()?(b(o.Mq.filter(e=>e.toLowerCase().includes(t.toLowerCase())).slice(0,10)),C(!0)):C(!1))},onFocus:()=>c.location&&C(!0),onBlur:()=>setTimeout(()=>C(!1),200),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Start typing city name..."}),N&&y.length>0&&(0,r.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:y.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{u({...c,location:e}),C(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm",children:e},e))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),(0,r.jsx)("input",{type:"date",required:!0,value:c.start_date,onChange:e=>u({...c,start_date:e.target.value}),max:new Date().toISOString().split("T")[0],className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm ${m.start_date?"border-red-500":"border-gray-300"}`}),m.start_date&&(0,r.jsx)("p",{className:"text-xs text-red-500 mt-1",children:m.start_date})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),(0,r.jsx)("input",{type:"date",value:c.end_date,onChange:e=>u({...c,end_date:e.target.value}),disabled:c.is_current,max:new Date().toISOString().split("T")[0],className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm disabled:bg-gray-100 ${m.end_date?"border-red-500":"border-gray-300"}`}),m.end_date&&(0,r.jsx)("p",{className:"text-xs text-red-500 mt-1",children:m.end_date})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"edit_is_current",checked:c.is_current,onChange:e=>u({...c,is_current:e.target.checked,end_date:""}),className:"w-4 h-4 text-[#162f16] border-gray-300 rounded focus:ring-[#162f16]"}),(0,r.jsx)("label",{htmlFor:"edit_is_current",className:"text-sm text-gray-700",children:"I currently work here"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["HR/Company Email (Optional)",(0,r.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"For verification badge"})]}),(0,r.jsx)("input",{type:"email",value:c.hr_email,onChange:e=>u({...c,hr_email:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"hr@company.com"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,r.jsx)("textarea",{value:c.description,onChange:e=>u({...c,description:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Describe your role and achievements..."})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-[#162f16] text-white rounded-lg font-medium hover:bg-[#0f2310] transition disabled:opacity-50",children:l?"Saving...":"Save Changes"}),(0,r.jsx)("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition",children:"Cancel"})]})]})]})}):null}var d=a(1521),c=a(6131);function u({experience:e,isOwner:t,onUpdate:a}){let[o,u]=(0,n.useState)(!1),[m,x]=(0,n.useState)(!1),[g,f]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),[y,b]=(0,n.useState)(null);(0,n.useEffect)(()=>{t&&e.hr_email&&v()},[e.id,t]);let v=async()=>{try{let{data:t,error:a}=await s.N.from("verification_requests").select("status").eq("reference_id",e.id).eq("request_type","experience").order("created_at",{ascending:!1}).limit(1).single();if(a&&"PGRST116"!==a.code)throw a;t&&b(t.status)}catch(e){console.error("Error checking verification status:",e)}},j=async()=>{if(!m){x(!0);try{let{error:t}=await s.N.from("experiences").delete().eq("id",e.id);if(t)throw t;a(),u(!1)}catch(e){console.error("Error deleting experience:",e),alert("Failed to delete experience. Please try again.")}finally{x(!1)}}},_=e=>e?new Date(e).getFullYear().toString():"";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[e.company_logo?(0,r.jsx)(i.default,{src:e.company_logo,alt:e.company_name,width:40,height:40,className:"rounded object-contain"}):(0,r.jsx)("div",{className:"w-10 h-10 rounded bg-gray-200 flex items-center justify-center text-gray-600 text-xs font-semibold",children:e.company_name.substring(0,2).toUpperCase()}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 text-sm",children:e.position}),e.verified?(0,r.jsx)(d.A,{verified:!0,verifiedBy:e.verified_by,verifiedAt:e.verified_at,size:"sm"}):"pending"===y?(0,r.jsx)("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded-full text-xs font-medium",children:"Pending Verification"}):"rejected"===y?(0,r.jsx)("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 rounded-full text-xs font-medium",children:"Verification Rejected"}):null]}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:e.company_name}),e.location&&(0,r.jsx)("p",{className:"text-xs text-gray-500",children:e.location})]}),t&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>u(!o),className:"text-gray-400 hover:text-red-600 transition",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),o&&(0,r.jsxs)("div",{className:"absolute right-0 top-6 bg-white rounded-lg shadow-lg border border-gray-200 p-3 z-10 w-48",children:[(0,r.jsx)("p",{className:"text-xs text-gray-700 mb-2",children:"Delete this experience?"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:j,disabled:m,className:"flex-1 px-2 py-1 bg-red-600 text-white rounded text-xs font-medium hover:bg-red-700 transition disabled:opacity-50",children:m?"...":"Delete"}),(0,r.jsx)("button",{onClick:()=>u(!1),className:"flex-1 px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs font-medium hover:bg-gray-200 transition",children:"Cancel"})]})]})]})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:[_(e.start_date)," - ",e.is_current?"Present":_(e.end_date)]}),e.description&&(0,r.jsx)("p",{className:"text-xs text-gray-700 mb-3 line-clamp-2",children:e.description}),t&&(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("button",{onClick:()=>f(!0),className:"text-xs text-[#162f16] hover:underline",children:"Edit"}),e.hr_email&&!e.verified&&"pending"!==y&&(0,r.jsxs)("button",{onClick:()=>p(!0),className:"text-xs text-blue-600 hover:underline flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Request Verification"]})]})]}),(0,r.jsx)(l,{isOpen:g,onClose:()=>f(!1),experience:e,onSuccess:a}),e.hr_email&&(0,r.jsx)(c.A,{isOpen:h,onClose:()=>p(!1),type:"experience",referenceId:e.id,verifierEmail:e.hr_email,itemDetails:{title:e.position,organization:e.company_name,startDate:e.start_date,endDate:e.end_date,isCurrent:e.is_current},onSuccess:()=>{v(),a()}})]})}},1521:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(5155);function n({verified:e,verifiedBy:t,verifiedAt:a,size:n="sm"}){return e?(0,r.jsxs)("div",{className:"group relative inline-flex",children:[(0,r.jsxs)("span",{className:`${{sm:"px-2 py-0.5 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-1.5 text-base"}[n]} bg-blue-100 text-blue-700 rounded-full font-medium flex items-center gap-1.5 cursor-help`,children:[(0,r.jsx)("svg",{className:{sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"}[n],fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Verified"]}),(t||a)&&(0,r.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:[(0,r.jsxs)("div",{className:"text-center",children:[t&&(0,r.jsxs)("div",{children:["Verified by: ",t]}),a&&(0,r.jsxs)("div",{children:["Date: ",new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})]}),(0,r.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"})]})]}):null}},2995:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(5155),n=a(2115),s=a(1142),i=a(3137);function o({isOpen:e,onClose:t,profile:a,onSuccess:o,onAddExperience:l,onAddEducation:d,onAddCertification:c,onAddVolunteering:u,onAddProject:m,onAddPublication:x}){let[g,f]=(0,n.useState)(!1),[h,p]=(0,n.useState)({professional_summary:"",phone:"",phone_country_code:"+44",location:"",skills:[],preferred_countries:[],social_links:{linkedin:"",whatsapp:"",meta:"",instagram:""}}),[y,b]=(0,n.useState)(""),[v,j]=(0,n.useState)(""),[_,w]=(0,n.useState)([]),[N,C]=(0,n.useState)([]),[S,k]=(0,n.useState)([]),[D,A]=(0,n.useState)(!1),[L,M]=(0,n.useState)(!1),[E,B]=(0,n.useState)(!1),[P,T]=(0,n.useState)({});(0,n.useEffect)(()=>{a&&p({professional_summary:a.professional_summary||"",phone:a.phone||"",phone_country_code:a.phone_country_code||"+44",location:a.location||"",skills:a.skills||[],preferred_countries:a.preferred_countries||[],social_links:{linkedin:a.social_links?.linkedin??"",whatsapp:a.social_links?.whatsapp??"",meta:a.social_links?.meta??"",instagram:a.social_links?.instagram??""}})},[a]);let I=async e=>{let r;if(e.preventDefault(),r={},h.professional_summary.trim().length<i.kY&&(r.professional_summary=`Professional summary must be at least ${i.kY} characters`),h.phone&&!/^\d{7,15}$/.test(h.phone.replace(/\s/g,""))&&(r.phone="Please enter a valid phone number"),T(r),0===Object.keys(r).length){f(!0);try{let{error:e}=await s.N.from("profiles").update({professional_summary:h.professional_summary,phone:h.phone,phone_country_code:h.phone_country_code,location:h.location,skills:h.skills,preferred_countries:h.preferred_countries,social_links:h.social_links}).eq("id",a.id);if(e)throw e;o(),t()}catch(e){console.error("Error updating profile:",e),alert("Failed to update profile. Please try again.")}finally{f(!1)}}},U=e=>{if(e.trim()&&!h.skills.includes(e.trim())){if(!i.J3.some(t=>t.toLowerCase()===e.toLowerCase()))return void alert("Please select a skill from the dropdown list");p({...h,skills:[...h.skills,e.trim()]}),b(""),A(!1)}},F=e=>{e.trim()&&!h.preferred_countries.includes(e.trim())&&(p({...h,preferred_countries:[...h.preferred_countries,e.trim()]}),j(""),M(!1))},q=[{label:"Experience",onClick:l},{label:"Education",onClick:d},{label:"Certification",onClick:c},{label:"Volunteering",onClick:u},{label:"Project",onClick:m},{label:"Publication",onClick:x}].filter(e=>e.onClick);return e?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Profile"}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("form",{onSubmit:I,className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Professional Summary *",(0,r.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(Minimum ",i.kY," characters)"]})]}),(0,r.jsx)("textarea",{value:h.professional_summary,onChange:e=>p({...h,professional_summary:e.target.value}),rows:4,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm ${P.professional_summary?"border-red-500":"border-gray-300"}`,placeholder:"Tell us about your professional background..."}),(0,r.jsxs)("div",{className:"flex justify-between mt-1",children:[P.professional_summary&&(0,r.jsx)("p",{className:"text-xs text-red-500",children:P.professional_summary}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 ml-auto",children:[h.professional_summary.length," / ",i.kY]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("select",{value:h.phone_country_code,onChange:e=>p({...h,phone_country_code:e.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",children:i.qo.map((e,t)=>(0,r.jsxs)("option",{value:e.code,children:[e.flag," ",e.code]},`${e.code}-${t}`))}),(0,r.jsx)("input",{type:"tel",value:h.phone,onChange:e=>p({...h,phone:e.target.value}),className:`flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm ${P.phone?"border-red-500":"border-gray-300"}`,placeholder:"7768188691"})]}),P.phone&&(0,r.jsx)("p",{className:"text-xs text-red-500 mt-1",children:P.phone})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),(0,r.jsx)("input",{type:"text",value:h.location,onChange:e=>{var t;return t=e.target.value,void(p({...h,location:t}),t.trim()?(k(i.Mq.filter(e=>e.toLowerCase().includes(t.toLowerCase())).slice(0,10)),B(!0)):B(!1))},onFocus:()=>h.location&&B(!0),onBlur:()=>setTimeout(()=>B(!1),200),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Start typing city name..."}),E&&S.length>0&&(0,r.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:S.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{p({...h,location:e}),B(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm",children:e},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skills"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,r.jsx)("input",{type:"text",value:y,onChange:e=>{var t;b(t=e.target.value),t.trim()?(w(i.J3.filter(e=>e.toLowerCase().includes(t.toLowerCase())).slice(0,10)),A(!0)):A(!1)},onFocus:()=>y&&A(!0),onBlur:()=>setTimeout(()=>A(!1),200),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Start typing skill name..."}),(0,r.jsx)("button",{type:"button",onClick:()=>U(y),className:"px-4 py-2 bg-[#162f16] text-white rounded-lg text-sm font-medium hover:bg-[#0f2310] transition",children:"Add"})]}),D&&_.length>0&&(0,r.jsx)("div",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:_.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>U(e),className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm",children:e},e))})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:h.skills.map((e,t)=>(0,r.jsxs)("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-lg text-xs font-medium flex items-center gap-2",children:[e,(0,r.jsx)("button",{type:"button",onClick:()=>{p({...h,skills:h.skills.filter((e,a)=>a!==t)})},className:"hover:text-red-600",children:"\xd7"})]},t))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Countries"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,r.jsx)("input",{type:"text",value:v,onChange:e=>{var t;j(t=e.target.value),t.trim()?(C(i.FS.filter(e=>e.toLowerCase().includes(t.toLowerCase())).slice(0,10)),M(!0)):M(!1)},onFocus:()=>v&&M(!0),onBlur:()=>setTimeout(()=>M(!1),200),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Start typing country name..."}),(0,r.jsx)("button",{type:"button",onClick:()=>F(v),className:"px-4 py-2 bg-[#162f16] text-white rounded-lg text-sm font-medium hover:bg-[#0f2310] transition",children:"Add"})]}),L&&N.length>0&&(0,r.jsx)("div",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:N.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>F(e),className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm",children:e},e))})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:h.preferred_countries.map((e,t)=>(0,r.jsxs)("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-medium flex items-center gap-2",children:[e,(0,r.jsx)("button",{type:"button",onClick:()=>{p({...h,preferred_countries:h.preferred_countries.filter((e,a)=>a!==t)})},className:"hover:text-red-600",children:"\xd7"})]},t))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Social Links"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("input",{type:"url",value:h.social_links.linkedin,onChange:e=>p({...h,social_links:{...h.social_links,linkedin:e.target.value}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"LinkedIn URL"}),(0,r.jsx)("input",{type:"tel",value:h.social_links.whatsapp,onChange:e=>p({...h,social_links:{...h.social_links,whatsapp:e.target.value}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"WhatsApp Number (e.g., 447768188691)"}),(0,r.jsx)("input",{type:"url",value:h.social_links.meta,onChange:e=>p({...h,social_links:{...h.social_links,meta:e.target.value}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Facebook/Meta URL"}),(0,r.jsx)("input",{type:"url",value:h.social_links.instagram,onChange:e=>p({...h,social_links:{...h.social_links,instagram:e.target.value}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Instagram URL"})]})]}),q.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Add to profile"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"Create new sections"})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-3",children:q.map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>{var a;(a=e.onClick)&&(t(),a())},className:"px-4 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 hover:border-[#162f16] hover:text-[#162f16] transition",children:["+ ",e.label]},e.label))})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)("button",{type:"submit",disabled:g,className:"flex-1 px-4 py-2 bg-[#162f16] text-white rounded-lg font-medium hover:bg-[#0f2310] transition disabled:opacity-50",children:g?"Saving...":"Save Changes"}),(0,r.jsx)("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition",children:"Cancel"})]})]})]})}):null}},3137:(e,t,a)=>{a.d(t,{Aq:()=>g,FS:()=>r,J3:()=>o,Kz:()=>x,Mq:()=>n,iD:()=>d,iR:()=>l,iv:()=>c,kY:()=>m,qo:()=>u,s_:()=>s,wl:()=>i});let r=["Afghanistan","Albania","Algeria","Argentina","Australia","Austria","Bangladesh","Belgium","Brazil","Canada","Chile","China","Colombia","Czech Republic","Denmark","Egypt","Finland","France","Germany","Greece","Hong Kong","Hungary","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Japan","Jordan","Kenya","Malaysia","Mexico","Netherlands","New Zealand","Nigeria","Norway","Pakistan","Philippines","Poland","Portugal","Romania","Russia","Saudi Arabia","Singapore","South Africa","South Korea","Spain","Sweden","Switzerland","Taiwan","Thailand","Turkey","Ukraine","United Arab Emirates","United Kingdom","United States","Vietnam"],n=["Amsterdam","Athens","Atlanta","Auckland","Austin","Bangkok","Barcelona","Beijing","Berlin","Bogot\xe1","Boston","Brussels","Budapest","Buenos Aires","Cairo","Cape Town","Chicago","Copenhagen","Dallas","Delhi","Denver","Dubai","Dublin","Edinburgh","Frankfurt","Geneva","Hamburg","Helsinki","Hong Kong","Houston","Istanbul","Jakarta","Johannesburg","Kuala Lumpur","Lisbon","London","Los Angeles","Madrid","Manchester","Melbourne","Mexico City","Miami","Milan","Montreal","Moscow","Mumbai","Munich","New York","Oslo","Paris","Philadelphia","Phoenix","Prague","Rome","San Francisco","Santiago","S\xe3o Paulo","Seattle","Seoul","Shanghai","Singapore","Stockholm","Sydney","Tel Aviv","Tokyo","Toronto","Vancouver","Vienna","Warsaw","Washington DC","Zurich"],s=["Software Engineer","Senior Software Engineer","Lead Software Engineer","Staff Software Engineer","Principal Engineer","Engineering Manager","Senior Engineering Manager","Director of Engineering","VP of Engineering","CTO","Frontend Developer","Backend Developer","Full Stack Developer","DevOps Engineer","Site Reliability Engineer","Data Engineer","Data Scientist","Machine Learning Engineer","Product Manager","Senior Product Manager","Product Designer","UX Designer","UI Designer","UX Researcher","Marketing Manager","Sales Manager","Business Analyst","Project Manager","Scrum Master","QA Engineer","Security Engineer","Cloud Architect","Solutions Architect","Technical Lead","Team Lead","Consultant","Senior Consultant","Analyst","Senior Analyst","Intern"],i=["Google","Meta","Amazon","Apple","Microsoft","Netflix","Tesla","SpaceX","Uber","Airbnb","Twitter","LinkedIn","Salesforce","Oracle","IBM","Intel","NVIDIA","AMD","Cisco","Adobe","Shopify","Stripe","Square","PayPal","Goldman Sachs","JPMorgan Chase","Morgan Stanley","Bank of America","Citigroup","McKinsey & Company","Boston Consulting Group","Bain & Company","Deloitte","PwC","EY","KPMG","Accenture","Capgemini","TCS","Infosys","Wipro","Samsung","Sony","LG","Huawei","Xiaomi","ByteDance","Tencent","Alibaba","Baidu","JD.com","Spotify","Snap","Pinterest","Reddit","Discord","Zoom","Slack","Atlassian","Dropbox","Box","Twilio","Datadog","MongoDB"],o=["JavaScript","TypeScript","Python","Java","C++","C#","Go","Rust","Swift","Kotlin","PHP","Ruby","Scala","R","MATLAB","SQL","HTML","CSS","React","Vue.js","Angular","Next.js","Node.js","Express","Django","Flask","Spring Boot","ASP.NET","Ruby on Rails","Laravel","FastAPI","GraphQL","REST API","Docker","Kubernetes","AWS","Azure","Google Cloud","Terraform","Jenkins","Git","GitHub","GitLab","CI/CD","Agile","Scrum","Kanban","JIRA","MongoDB","PostgreSQL","MySQL","Redis","Elasticsearch","Cassandra","DynamoDB","Machine Learning","Deep Learning","TensorFlow","PyTorch","Scikit-learn","Data Analysis","Data Visualization","Pandas","NumPy","Tableau","Power BI","Product Management","Project Management","Leadership","Communication","Problem Solving","Team Collaboration","Critical Thinking","Time Management","UI/UX Design","Figma","Adobe XD","Sketch","Photoshop","Illustrator","SEO","Digital Marketing","Content Marketing","Social Media Marketing","Sales","Business Development","Customer Success","Account Management"],l=["Bachelor of Science (B.S.)","Bachelor of Arts (B.A.)","Bachelor of Engineering (B.Eng.)","Bachelor of Technology (B.Tech.)","Bachelor of Business Administration (BBA)","Bachelor of Commerce (B.Com.)","Bachelor of Computer Applications (BCA)","Master of Science (M.S.)","Master of Arts (M.A.)","Master of Engineering (M.Eng.)","Master of Technology (M.Tech.)","Master of Business Administration (MBA)","Master of Computer Applications (MCA)","Master of Fine Arts (MFA)","Doctor of Philosophy (Ph.D.)","Doctor of Medicine (M.D.)","Doctor of Education (Ed.D.)","Juris Doctor (J.D.)","Associate Degree","Diploma","Certificate","High School Diploma","GED","Professional Degree","Postgraduate Diploma"],d=["Computer Science","Information Technology","Software Engineering","Data Science","Artificial Intelligence","Machine Learning","Cybersecurity","Computer Engineering","Electrical Engineering","Mechanical Engineering","Civil Engineering","Chemical Engineering","Aerospace Engineering","Biomedical Engineering","Industrial Engineering","Business Administration","Finance","Accounting","Economics","Marketing","Management","Entrepreneurship","International Business","Human Resources","Mathematics","Statistics","Physics","Chemistry","Biology","Biotechnology","Environmental Science","Psychology","Sociology","Political Science","History","English Literature","Communications","Journalism","Media Studies","Film Studies","Graphic Design","Fine Arts","Music","Architecture","Urban Planning","Law","Medicine","Nursing","Pharmacy","Public Health","Education"],c=["Harvard University","Stanford University","Massachusetts Institute of Technology (MIT)","University of Cambridge","University of Oxford","California Institute of Technology (Caltech)","Princeton University","Yale University","Columbia University","University of Chicago","Imperial College London","ETH Zurich","University of California, Berkeley","University of California, Los Angeles (UCLA)","University of Pennsylvania","Cornell University","University of Michigan","Johns Hopkins University","Northwestern University","Duke University","Carnegie Mellon University","New York University (NYU)","University of Toronto","McGill University","University of British Columbia","National University of Singapore (NUS)","Nanyang Technological University (NTU)","Tsinghua University","Peking University","University of Tokyo","Kyoto University","Seoul National University","University of Hong Kong","Australian National University","University of Melbourne","University of Sydney","University of Edinburgh","King's College London","London School of Economics (LSE)","University College London (UCL)","Technical University of Munich","Ludwig Maximilian University of Munich","Heidelberg University","University of Amsterdam","Delft University of Technology","KU Leuven","Sorbonne University","\xc9cole Polytechnique","Indian Institute of Technology (IIT) Bombay","Indian Institute of Technology (IIT) Delhi","Indian Institute of Science (IISc)"],u=[{code:"+1",country:"United States",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{code:"+1",country:"Canada",flag:"\uD83C\uDDE8\uD83C\uDDE6"},{code:"+44",country:"United Kingdom",flag:"\uD83C\uDDEC\uD83C\uDDE7"},{code:"+61",country:"Australia",flag:"\uD83C\uDDE6\uD83C\uDDFA"},{code:"+91",country:"India",flag:"\uD83C\uDDEE\uD83C\uDDF3"},{code:"+86",country:"China",flag:"\uD83C\uDDE8\uD83C\uDDF3"},{code:"+81",country:"Japan",flag:"\uD83C\uDDEF\uD83C\uDDF5"},{code:"+82",country:"South Korea",flag:"\uD83C\uDDF0\uD83C\uDDF7"},{code:"+65",country:"Singapore",flag:"\uD83C\uDDF8\uD83C\uDDEC"},{code:"+49",country:"Germany",flag:"\uD83C\uDDE9\uD83C\uDDEA"},{code:"+33",country:"France",flag:"\uD83C\uDDEB\uD83C\uDDF7"},{code:"+39",country:"Italy",flag:"\uD83C\uDDEE\uD83C\uDDF9"},{code:"+34",country:"Spain",flag:"\uD83C\uDDEA\uD83C\uDDF8"},{code:"+31",country:"Netherlands",flag:"\uD83C\uDDF3\uD83C\uDDF1"},{code:"+46",country:"Sweden",flag:"\uD83C\uDDF8\uD83C\uDDEA"},{code:"+47",country:"Norway",flag:"\uD83C\uDDF3\uD83C\uDDF4"},{code:"+45",country:"Denmark",flag:"\uD83C\uDDE9\uD83C\uDDF0"},{code:"+41",country:"Switzerland",flag:"\uD83C\uDDE8\uD83C\uDDED"},{code:"+43",country:"Austria",flag:"\uD83C\uDDE6\uD83C\uDDF9"},{code:"+32",country:"Belgium",flag:"\uD83C\uDDE7\uD83C\uDDEA"},{code:"+351",country:"Portugal",flag:"\uD83C\uDDF5\uD83C\uDDF9"},{code:"+353",country:"Ireland",flag:"\uD83C\uDDEE\uD83C\uDDEA"},{code:"+64",country:"New Zealand",flag:"\uD83C\uDDF3\uD83C\uDDFF"},{code:"+971",country:"UAE",flag:"\uD83C\uDDE6\uD83C\uDDEA"},{code:"+966",country:"Saudi Arabia",flag:"\uD83C\uDDF8\uD83C\uDDE6"},{code:"+27",country:"South Africa",flag:"\uD83C\uDDFF\uD83C\uDDE6"}],m=100,x=["Animal Welfare","Arts and Culture","Children and Youth Development","Civil Rights and Social Action","Community Development","Disaster Relief","Economic Empowerment","Education","Environment","Health","Human Rights","Humanitarian Relief","Politics","Poverty Alleviation","Science and Technology","Social Services","Sports and Recreation"],g=["Amazon Web Services (AWS)","Microsoft","Google Cloud","Oracle","Cisco","CompTIA","PMI (Project Management Institute)","Scrum Alliance","Scaled Agile","ISACA","ISC2","Linux Professional Institute","Red Hat","VMware","Salesforce","HubSpot","Meta","IBM","Coursera","edX","Udacity","LinkedIn Learning","Pluralsight","DataCamp","Kaggle"]},3235:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(5155),n=a(2115),s=a(1142),i=a(3137);function o({isOpen:e,onClose:t,userId:a,onSuccess:o}){let[l,d]=(0,n.useState)(!1),[c,u]=(0,n.useState)({institution_name:"",degree:"",field_of_study:"",location:"",start_date:"",end_date:"",is_current:!1,description:"",admin_email:""}),[m,x]=(0,n.useState)({}),[g,f]=(0,n.useState)([]),[h,p]=(0,n.useState)([]),[y,b]=(0,n.useState)([]),[v,j]=(0,n.useState)([]),[_,w]=(0,n.useState)(!1),[N,C]=(0,n.useState)(!1),[S,k]=(0,n.useState)(!1),[D,A]=(0,n.useState)(!1),[L,M]=(0,n.useState)(!1),E=async e=>{let r,n,i,l;if(e.preventDefault(),r={},n=new Date,i=new Date(c.start_date),l=c.end_date?new Date(c.end_date):null,i>n&&(r.start_date="Start date cannot be in the future"),l&&l<i&&(r.end_date="End date cannot be before start date"),l&&l>n&&!c.is_current&&(r.end_date="End date cannot be in the future"),x(r),0===Object.keys(r).length){d(!0);try{let{error:e}=await s.N.from("education").insert({user_id:a,institution_name:c.institution_name,institution_logo:"",degree:c.degree,field_of_study:c.field_of_study,location:c.location,start_date:c.start_date,end_date:c.is_current?null:c.end_date,is_current:c.is_current,description:c.description,admin_email:c.admin_email,verified:!1});if(e)throw e;c.admin_email&&console.log("Sending verification email to:",c.admin_email),o(),t(),u({institution_name:"",degree:"",field_of_study:"",location:"",start_date:"",end_date:"",is_current:!1,description:"",admin_email:""}),x({})}catch(e){console.error("Error adding education:",e),alert("Failed to add education. Please try again.")}finally{d(!1)}}};return e?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add Education"}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("form",{onSubmit:E,className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Degree *"}),(0,r.jsx)("input",{type:"text",required:!0,value:c.degree,onChange:e=>{var t;return t=e.target.value,void(u({...c,degree:t}),t.trim()?(f(i.iR.filter(e=>e.toLowerCase().includes(t.toLowerCase())).slice(0,10)),w(!0)):w(!1))},onFocus:()=>c.degree&&w(!0),onBlur:()=>setTimeout(()=>w(!1),200),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Start typing degree..."}),_&&g.length>0&&(0,r.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:g.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{u({...c,degree:e}),w(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm",children:e},e))})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Institution Name *"}),(0,r.jsx)("input",{type:"text",required:!0,value:c.institution_name,onChange:e=>(e=>{if(u({...c,institution_name:e}),e.trim()){let t=i.iv.filter(t=>t.toLowerCase().includes(e.toLowerCase())).slice(0,10);b(t),k(!0),M(0===t.length||!t.some(t=>t.toLowerCase()===e.toLowerCase()))}else k(!1),M(!1)})(e.target.value),onFocus:()=>c.institution_name&&k(!0),onBlur:()=>setTimeout(()=>k(!1),200),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Start typing institution name..."}),S&&(0,r.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[y.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{u({...c,institution_name:e}),k(!1),M(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm",children:e},e)),L&&(0,r.jsxs)("button",{type:"button",onClick:()=>{k(!1),M(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm text-[#162f16] font-medium border-t border-gray-200",children:['+ Add "',c.institution_name,'"']})]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Field of Study *"}),(0,r.jsx)("input",{type:"text",required:!0,value:c.field_of_study,onChange:e=>{var t;return t=e.target.value,void(u({...c,field_of_study:t}),t.trim()?(p(i.iD.filter(e=>e.toLowerCase().includes(t.toLowerCase())).slice(0,10)),C(!0)):C(!1))},onFocus:()=>c.field_of_study&&C(!0),onBlur:()=>setTimeout(()=>C(!1),200),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Start typing field of study..."}),N&&h.length>0&&(0,r.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{u({...c,field_of_study:e}),C(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm",children:e},e))})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),(0,r.jsx)("input",{type:"text",value:c.location,onChange:e=>{var t;return t=e.target.value,void(u({...c,location:t}),t.trim()?(j(i.Mq.filter(e=>e.toLowerCase().includes(t.toLowerCase())).slice(0,10)),A(!0)):A(!1))},onFocus:()=>c.location&&A(!0),onBlur:()=>setTimeout(()=>A(!1),200),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Start typing city name..."}),D&&v.length>0&&(0,r.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:v.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{u({...c,location:e}),A(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm",children:e},e))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),(0,r.jsx)("input",{type:"date",required:!0,value:c.start_date,onChange:e=>u({...c,start_date:e.target.value}),max:new Date().toISOString().split("T")[0],className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm ${m.start_date?"border-red-500":"border-gray-300"}`}),m.start_date&&(0,r.jsx)("p",{className:"text-xs text-red-500 mt-1",children:m.start_date})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),(0,r.jsx)("input",{type:"date",value:c.end_date,onChange:e=>u({...c,end_date:e.target.value}),disabled:c.is_current,max:new Date().toISOString().split("T")[0],className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm disabled:bg-gray-100 ${m.end_date?"border-red-500":"border-gray-300"}`}),m.end_date&&(0,r.jsx)("p",{className:"text-xs text-red-500 mt-1",children:m.end_date})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"is_current_edu",checked:c.is_current,onChange:e=>u({...c,is_current:e.target.checked,end_date:""}),className:"w-4 h-4 text-[#162f16] border-gray-300 rounded focus:ring-[#162f16]"}),(0,r.jsx)("label",{htmlFor:"is_current_edu",className:"text-sm text-gray-700",children:"I currently study here"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Admin/University Email (Optional)",(0,r.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"For verification badge"})]}),(0,r.jsx)("input",{type:"email",value:c.admin_email,onChange:e=>u({...c,admin_email:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"admin@university.edu"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"We'll send a verification request to confirm your enrollment"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,r.jsx)("textarea",{value:c.description,onChange:e=>u({...c,description:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Describe your studies and achievements..."})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-[#162f16] text-white rounded-lg font-medium hover:bg-[#0f2310] transition disabled:opacity-50",children:l?"Adding...":"Add Education"}),(0,r.jsx)("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition",children:"Cancel"})]})]})]})}):null}},4879:(e,t,a)=>{a.d(t,{A:()=>u});var r=a(5155),n=a(2115),s=a(1142),i=a(5772),o=a(3137);function l({isOpen:e,onClose:t,education:a,onSuccess:i}){let[l,d]=(0,n.useState)(!1),[c,u]=(0,n.useState)({institution_name:"",degree:"",field_of_study:"",location:"",start_date:"",end_date:"",is_current:!1,description:"",admin_email:""}),[m,x]=(0,n.useState)({}),[g,f]=(0,n.useState)([]),[h,p]=(0,n.useState)([]),[y,b]=(0,n.useState)([]),[v,j]=(0,n.useState)([]),[_,w]=(0,n.useState)(!1),[N,C]=(0,n.useState)(!1),[S,k]=(0,n.useState)(!1),[D,A]=(0,n.useState)(!1),[L,M]=(0,n.useState)(!1);(0,n.useEffect)(()=>{a&&u({institution_name:a.institution_name||"",degree:a.degree||"",field_of_study:a.field_of_study||"",location:a.location||"",start_date:a.start_date||"",end_date:a.end_date||"",is_current:a.is_current||!1,description:a.description||"",admin_email:a.admin_email||""})},[a]);let E=async e=>{let r,n,o,l;if(e.preventDefault(),r={},n=new Date,o=new Date(c.start_date),l=c.end_date?new Date(c.end_date):null,o>n&&(r.start_date="Start date cannot be in the future"),l&&l<o&&(r.end_date="End date cannot be before start date"),l&&l>n&&!c.is_current&&(r.end_date="End date cannot be in the future"),x(r),0===Object.keys(r).length){d(!0);try{let{error:e}=await s.N.from("education").update({institution_name:c.institution_name,degree:c.degree,field_of_study:c.field_of_study,location:c.location,start_date:c.start_date,end_date:c.is_current?null:c.end_date,is_current:c.is_current,description:c.description,admin_email:c.admin_email}).eq("id",a.id);if(e)throw e;i(),t(),x({})}catch(e){console.error("Error updating education:",e),alert("Failed to update education. Please try again.")}finally{d(!1)}}};return e?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Education"}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("form",{onSubmit:E,className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Degree *"}),(0,r.jsx)("input",{type:"text",required:!0,value:c.degree,onChange:e=>{var t;return t=e.target.value,void(u({...c,degree:t}),t.trim()?(f(o.iR.filter(e=>e.toLowerCase().includes(t.toLowerCase())).slice(0,10)),w(!0)):w(!1))},onFocus:()=>c.degree&&w(!0),onBlur:()=>setTimeout(()=>w(!1),200),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Start typing degree..."}),_&&g.length>0&&(0,r.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:g.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{u({...c,degree:e}),w(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm",children:e},e))})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Institution Name *"}),(0,r.jsx)("input",{type:"text",required:!0,value:c.institution_name,onChange:e=>(e=>{if(u({...c,institution_name:e}),e.trim()){let t=o.iv.filter(t=>t.toLowerCase().includes(e.toLowerCase())).slice(0,10);b(t),k(!0),M(0===t.length||!t.some(t=>t.toLowerCase()===e.toLowerCase()))}else k(!1),M(!1)})(e.target.value),onFocus:()=>c.institution_name&&k(!0),onBlur:()=>setTimeout(()=>k(!1),200),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Start typing institution name..."}),S&&(0,r.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[y.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{u({...c,institution_name:e}),k(!1),M(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm",children:e},e)),L&&(0,r.jsxs)("button",{type:"button",onClick:()=>{k(!1),M(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm text-[#162f16] font-medium border-t border-gray-200",children:['+ Add "',c.institution_name,'"']})]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Field of Study *"}),(0,r.jsx)("input",{type:"text",required:!0,value:c.field_of_study,onChange:e=>{var t;return t=e.target.value,void(u({...c,field_of_study:t}),t.trim()?(p(o.iD.filter(e=>e.toLowerCase().includes(t.toLowerCase())).slice(0,10)),C(!0)):C(!1))},onFocus:()=>c.field_of_study&&C(!0),onBlur:()=>setTimeout(()=>C(!1),200),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Start typing field of study..."}),N&&h.length>0&&(0,r.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{u({...c,field_of_study:e}),C(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm",children:e},e))})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),(0,r.jsx)("input",{type:"text",value:c.location,onChange:e=>{var t;return t=e.target.value,void(u({...c,location:t}),t.trim()?(j(o.Mq.filter(e=>e.toLowerCase().includes(t.toLowerCase())).slice(0,10)),A(!0)):A(!1))},onFocus:()=>c.location&&A(!0),onBlur:()=>setTimeout(()=>A(!1),200),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Start typing city name..."}),D&&v.length>0&&(0,r.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:v.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{u({...c,location:e}),A(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm",children:e},e))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),(0,r.jsx)("input",{type:"date",required:!0,value:c.start_date,onChange:e=>u({...c,start_date:e.target.value}),max:new Date().toISOString().split("T")[0],className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm ${m.start_date?"border-red-500":"border-gray-300"}`}),m.start_date&&(0,r.jsx)("p",{className:"text-xs text-red-500 mt-1",children:m.start_date})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),(0,r.jsx)("input",{type:"date",value:c.end_date,onChange:e=>u({...c,end_date:e.target.value}),disabled:c.is_current,max:new Date().toISOString().split("T")[0],className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm disabled:bg-gray-100 ${m.end_date?"border-red-500":"border-gray-300"}`}),m.end_date&&(0,r.jsx)("p",{className:"text-xs text-red-500 mt-1",children:m.end_date})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"edit_is_current_edu",checked:c.is_current,onChange:e=>u({...c,is_current:e.target.checked,end_date:""}),className:"w-4 h-4 text-[#162f16] border-gray-300 rounded focus:ring-[#162f16]"}),(0,r.jsx)("label",{htmlFor:"edit_is_current_edu",className:"text-sm text-gray-700",children:"I currently study here"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Admin/University Email (Optional)",(0,r.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"For verification badge"})]}),(0,r.jsx)("input",{type:"email",value:c.admin_email,onChange:e=>u({...c,admin_email:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"admin@university.edu"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,r.jsx)("textarea",{value:c.description,onChange:e=>u({...c,description:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Describe your studies and achievements..."})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-[#162f16] text-white rounded-lg font-medium hover:bg-[#0f2310] transition disabled:opacity-50",children:l?"Saving...":"Save Changes"}),(0,r.jsx)("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition",children:"Cancel"})]})]})]})}):null}var d=a(1521),c=a(6131);function u({education:e,isOwner:t,onUpdate:a}){let[o,u]=(0,n.useState)(!1),[m,x]=(0,n.useState)(!1),[g,f]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),[y,b]=(0,n.useState)(null);(0,n.useEffect)(()=>{t&&e.admin_email&&v()},[e.id,t]);let v=async()=>{try{let{data:t,error:a}=await s.N.from("verification_requests").select("status").eq("reference_id",e.id).eq("request_type","education").order("created_at",{ascending:!1}).limit(1).single();if(a&&"PGRST116"!==a.code)throw a;t&&b(t.status)}catch(e){console.error("Error checking verification status:",e)}},j=async()=>{if(!m){x(!0);try{let{error:t}=await s.N.from("education").delete().eq("id",e.id);if(t)throw t;a(),u(!1)}catch(e){console.error("Error deleting education:",e),alert("Failed to delete education. Please try again.")}finally{x(!1)}}},_=e=>e?new Date(e).getFullYear().toString():"";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[e.institution_logo?(0,r.jsx)(i.default,{src:e.institution_logo,alt:e.institution_name,width:40,height:40,className:"rounded object-contain"}):(0,r.jsx)("div",{className:"w-10 h-10 rounded bg-gray-200 flex items-center justify-center text-gray-600 text-xs font-semibold",children:e.institution_name.substring(0,2).toUpperCase()}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 text-sm",children:e.degree}),e.verified?(0,r.jsx)(d.A,{verified:!0,verifiedBy:e.verified_by,verifiedAt:e.verified_at,size:"sm"}):"pending"===y?(0,r.jsx)("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded-full text-xs font-medium",children:"Pending Verification"}):"rejected"===y?(0,r.jsx)("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 rounded-full text-xs font-medium",children:"Verification Rejected"}):null]}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:e.institution_name}),e.location&&(0,r.jsx)("p",{className:"text-xs text-gray-500",children:e.location})]}),t&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>u(!o),className:"text-gray-400 hover:text-red-600 transition",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),o&&(0,r.jsxs)("div",{className:"absolute right-0 top-6 bg-white rounded-lg shadow-lg border border-gray-200 p-3 z-10 w-48",children:[(0,r.jsx)("p",{className:"text-xs text-gray-700 mb-2",children:"Delete this education?"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:j,disabled:m,className:"flex-1 px-2 py-1 bg-red-600 text-white rounded text-xs font-medium hover:bg-red-700 transition disabled:opacity-50",children:m?"...":"Delete"}),(0,r.jsx)("button",{onClick:()=>u(!1),className:"flex-1 px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs font-medium hover:bg-gray-200 transition",children:"Cancel"})]})]})]})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:[_(e.start_date)," - ",e.is_current?"Present":_(e.end_date)]}),e.field_of_study&&(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:e.field_of_study}),e.description&&(0,r.jsx)("p",{className:"text-xs text-gray-700 mb-3 line-clamp-2",children:e.description}),t&&(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("button",{onClick:()=>f(!0),className:"text-xs text-[#162f16] hover:underline",children:"Edit"}),e.admin_email&&!e.verified&&"pending"!==y&&(0,r.jsxs)("button",{onClick:()=>p(!0),className:"text-xs text-blue-600 hover:underline flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Request Verification"]})]})]}),(0,r.jsx)(l,{isOpen:g,onClose:()=>f(!1),education:e,onSuccess:a}),e.admin_email&&(0,r.jsx)(c.A,{isOpen:h,onClose:()=>p(!1),type:"education",referenceId:e.id,verifierEmail:e.admin_email,itemDetails:{title:e.degree,organization:e.institution_name,startDate:e.start_date,endDate:e.end_date,isCurrent:e.is_current},onSuccess:()=>{v(),a()}})]})}},6131:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(5155),n=a(2115),s=a(1142);function i({isOpen:e,onClose:t,type:a,referenceId:i,verifierEmail:o,itemDetails:l,onSuccess:d}){let[c,u]=(0,n.useState)(!1),[m,x]=(0,n.useState)(""),g=async()=>{if(!o)return void alert("No verifier email provided. Please add an HR/Admin email first.");u(!0);try{let{data:{user:e}}=await s.N.auth.getUser();if(!e)throw Error("User not authenticated");let{data:r}=await s.N.from("profiles").select("full_name").eq("id",e.id).single(),n=r?.full_name||"User",{data:c,error:u}=await s.N.rpc("generate_verification_token");if(u)throw u;let{data:m,error:x}=await s.N.from("verification_requests").insert({user_id:e.id,request_type:a,reference_id:i,verifier_email:o,verification_token:c,status:"pending"}).select().single();if(x)throw x;let{data:g,error:f}=await s.N.functions.invoke("send-verification-email",{body:{verificationRequestId:m.id,verifierEmail:o,userName:n,requestType:a,itemDetails:l,verificationToken:c}});f?(console.error("Error sending email:",f),alert("Verification request created successfully. However, there was an issue sending the email. Please contact support if the verifier doesn't receive it.")):alert(`Verification request sent to ${o}. They will receive an email with instructions.`),d(),t()}catch(e){console.error("Error sending verification request:",e),alert("Failed to send verification request. Please try again.")}finally{u(!1)}};if(!e)return null;let f=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short"});return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsx)("div",{className:"bg-white rounded-xl max-w-lg w-full",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"Request Verification"}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"experience"===a?"Experience Details":"Education Details"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600",children:"experience"===a?"Position:":"Degree:"}),(0,r.jsx)("span",{className:"ml-2 text-gray-900 font-medium",children:l.title})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600",children:"experience"===a?"Company:":"Institution:"}),(0,r.jsx)("span",{className:"ml-2 text-gray-900 font-medium",children:l.organization})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Period:"}),(0,r.jsxs)("span",{className:"ml-2 text-gray-900 font-medium",children:[f(l.startDate)," - ",l.isCurrent?"Present":f(l.endDate||"")]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Verifier Email"}),(0,r.jsx)("input",{type:"email",value:o,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-700"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"experience"===a?"This email was provided as your HR contact":"This email was provided as your institution admin contact"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Message (Optional)"}),(0,r.jsx)("textarea",{value:m,onChange:e=>x(e.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#162f16] focus:border-transparent",placeholder:"Add any additional context for the verifier..."})]}),(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,r.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,r.jsx)("p",{className:"font-medium mb-1",children:"What happens next?"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[(0,r.jsxs)("li",{children:["An email will be sent to ",o]}),(0,r.jsxs)("li",{children:["They can verify or reject your ",a," details"]}),(0,r.jsx)("li",{children:"You'll be notified of their decision"}),(0,r.jsx)("li",{children:"A verification badge will appear if approved"})]})]})]})}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),(0,r.jsx)("button",{onClick:g,disabled:c,className:"flex-1 px-4 py-2 bg-[#162f16] text-white rounded-lg hover:bg-[#0f2310] transition disabled:opacity-50",children:c?"Sending...":"Send Request"})]})]})]})})})}},6181:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(5155),n=a(2115),s=a(1142),i=a(3137);function o({isOpen:e,onClose:t,userId:a,onSuccess:o}){let[l,d]=(0,n.useState)(!1),[c,u]=(0,n.useState)({company_name:"",position:"",location:"",start_date:"",end_date:"",is_current:!1,description:"",hr_email:""}),[m,x]=(0,n.useState)({}),[g,f]=(0,n.useState)([]),[h,p]=(0,n.useState)([]),[y,b]=(0,n.useState)([]),[v,j]=(0,n.useState)(!1),[_,w]=(0,n.useState)(!1),[N,C]=(0,n.useState)(!1),[S,k]=(0,n.useState)(!1),D=async e=>{let r,n,i,l;if(e.preventDefault(),r={},n=new Date,i=new Date(c.start_date),l=c.end_date?new Date(c.end_date):null,i>n&&(r.start_date="Start date cannot be in the future"),l&&l<i&&(r.end_date="End date cannot be before start date"),l&&l>n&&!c.is_current&&(r.end_date="End date cannot be in the future"),x(r),0===Object.keys(r).length){d(!0);try{let{error:e}=await s.N.from("experiences").insert({user_id:a,company_name:c.company_name,company_logo:"",position:c.position,location:c.location,start_date:c.start_date,end_date:c.is_current?null:c.end_date,is_current:c.is_current,description:c.description,hr_email:c.hr_email,verified:!1});if(e)throw e;c.hr_email&&console.log("Sending verification email to:",c.hr_email),o(),t(),u({company_name:"",position:"",location:"",start_date:"",end_date:"",is_current:!1,description:"",hr_email:""}),x({})}catch(e){console.error("Error adding experience:",e),alert("Failed to add experience. Please try again.")}finally{d(!1)}}};return e?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add Experience"}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("form",{onSubmit:D,className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Position *"}),(0,r.jsx)("input",{type:"text",required:!0,value:c.position,onChange:e=>{var t;return t=e.target.value,void(u({...c,position:t}),t.trim()?(f(i.s_.filter(e=>e.toLowerCase().includes(t.toLowerCase())).slice(0,10)),j(!0)):j(!1))},onFocus:()=>c.position&&j(!0),onBlur:()=>setTimeout(()=>j(!1),200),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Start typing position..."}),v&&g.length>0&&(0,r.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:g.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{u({...c,position:e}),j(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm",children:e},e))})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name *"}),(0,r.jsx)("input",{type:"text",required:!0,value:c.company_name,onChange:e=>(e=>{if(u({...c,company_name:e}),e.trim()){let t=i.wl.filter(t=>t.toLowerCase().includes(e.toLowerCase())).slice(0,10);p(t),w(!0),k(0===t.length||!t.some(t=>t.toLowerCase()===e.toLowerCase()))}else w(!1),k(!1)})(e.target.value),onFocus:()=>c.company_name&&w(!0),onBlur:()=>setTimeout(()=>w(!1),200),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Start typing company name..."}),_&&(0,r.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[h.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{u({...c,company_name:e}),w(!1),k(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm",children:e},e)),S&&(0,r.jsxs)("button",{type:"button",onClick:()=>{w(!1),k(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm text-[#162f16] font-medium border-t border-gray-200",children:['+ Add "',c.company_name,'"']})]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),(0,r.jsx)("input",{type:"text",value:c.location,onChange:e=>{var t;return t=e.target.value,void(u({...c,location:t}),t.trim()?(b(i.Mq.filter(e=>e.toLowerCase().includes(t.toLowerCase())).slice(0,10)),C(!0)):C(!1))},onFocus:()=>c.location&&C(!0),onBlur:()=>setTimeout(()=>C(!1),200),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Start typing city name..."}),N&&y.length>0&&(0,r.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:y.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{u({...c,location:e}),C(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm",children:e},e))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),(0,r.jsx)("input",{type:"date",required:!0,value:c.start_date,onChange:e=>u({...c,start_date:e.target.value}),max:new Date().toISOString().split("T")[0],className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm ${m.start_date?"border-red-500":"border-gray-300"}`}),m.start_date&&(0,r.jsx)("p",{className:"text-xs text-red-500 mt-1",children:m.start_date})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),(0,r.jsx)("input",{type:"date",value:c.end_date,onChange:e=>u({...c,end_date:e.target.value}),disabled:c.is_current,max:new Date().toISOString().split("T")[0],className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm disabled:bg-gray-100 ${m.end_date?"border-red-500":"border-gray-300"}`}),m.end_date&&(0,r.jsx)("p",{className:"text-xs text-red-500 mt-1",children:m.end_date})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"is_current",checked:c.is_current,onChange:e=>u({...c,is_current:e.target.checked,end_date:""}),className:"w-4 h-4 text-[#162f16] border-gray-300 rounded focus:ring-[#162f16]"}),(0,r.jsx)("label",{htmlFor:"is_current",className:"text-sm text-gray-700",children:"I currently work here"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["HR/Company Email (Optional)",(0,r.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"For verification badge"})]}),(0,r.jsx)("input",{type:"email",value:c.hr_email,onChange:e=>u({...c,hr_email:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"hr@company.com"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"We'll send a verification request to confirm your employment"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,r.jsx)("textarea",{value:c.description,onChange:e=>u({...c,description:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm",placeholder:"Describe your role and achievements..."})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-[#162f16] text-white rounded-lg font-medium hover:bg-[#0f2310] transition disabled:opacity-50",children:l?"Adding...":"Add Experience"}),(0,r.jsx)("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition",children:"Cancel"})]})]})]})}):null}}}]);