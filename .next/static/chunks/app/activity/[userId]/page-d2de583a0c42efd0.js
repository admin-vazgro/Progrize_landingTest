(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[113],{984:(e,s,t)=>{Promise.resolve().then(t.bind(t,1520))},1520:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var a=t(5155),r=t(2115),l=t(3321),i=t(1142),n=t(9145),c=t(6763);function d(){let e=(0,l.useRouter)(),s=(0,l.useParams)().userId,[t,d]=(0,r.useState)(null),[u,o]=(0,r.useState)(null),[m,x]=(0,r.useState)([]),[h,p]=(0,r.useState)(!0),f=(0,r.useCallback)(async()=>{try{let{data:{user:t}}=await i.N.auth.getUser();if(!t)return void e.push("/");d(t.id);let{data:a,error:r}=await i.N.from("profiles").select("full_name, avatar_url, occupation").eq("id",s).single();if(r)throw r;o(a);let{data:l,error:n}=await i.N.from("posts").select(`
          *,
          post_likes!left(user_id),
          events!left(*)
        `).eq("user_id",s).order("created_at",{ascending:!1});if(n)throw n;let c=await Promise.all((l||[]).map(async e=>{let s,r=e.post_likes?.some(e=>e.user_id===t.id)||!1;if("event"===e.post_type&&e.events&&e.events.length>0){let a=e.events[0],{data:r}=await i.N.from("event_rsvps").select("status").eq("event_id",a.id).eq("user_id",t.id).single();s={...a,user_rsvp:r?.status||null}}return{...e,user_name:a?.full_name||"User",user_avatar:a?.avatar_url||"",user_occupation:a?.occupation||"",is_liked:r,event:s}}));x(c)}catch(e){console.error("Error loading activity:",e)}finally{p(!1)}},[e,s]);return((0,r.useEffect)(()=>{f()},[f]),h)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-gray-600",children:"Loading..."})}):u&&t?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(n.A,{onAuthClick:()=>{e.push("/")}}),(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-6 py-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"All activity"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[u.full_name,"'s posts"]})]}),(0,a.jsx)("button",{onClick:()=>e.back(),className:"text-sm text-[#162f16] hover:underline",children:"Back"})]}),0===m.length?(0,a.jsx)("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"No posts yet."})}):(0,a.jsx)("div",{className:"space-y-4",children:m.map(e=>(0,a.jsx)(c.A,{post:e,currentUserId:t,onUpdate:f},e.id))})]})]}):null}}},e=>{e.O(0,[12,591,299,441,794,358],()=>e(e.s=984)),_N_E=e.O()}]);