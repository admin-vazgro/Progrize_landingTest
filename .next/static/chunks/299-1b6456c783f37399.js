"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[299],{1142:(e,t,s)=>{s.d(t,{N:()=>r});let r=(0,s(8936).createClient)("https://jfjmpljeavukknfnrbwa.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impmam1wbGplYXZ1a2tuZm5yYndhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4NjA5ODYsImV4cCI6MjA4MTQzNjk4Nn0.Dc0rOSbzHtq6dtn-Rtg79Jk4DUSJe6RP49gp0r3KwCs")},6763:(e,t,s)=>{s.d(t,{A:()=>c});var r=s(5155),a=s(2115),n=s(1142),i=s(3321),o=s(5772);function l({postId:e,currentUserId:t,onUpdate:s}){let l=(0,i.useRouter)(),[c,d]=(0,a.useState)([]),[m,x]=(0,a.useState)(""),[u,h]=(0,a.useState)(!1),g=(0,a.useCallback)(async()=>{try{let{data:t,error:s}=await n.N.from("comments").select("*").eq("post_id",e).order("created_at",{ascending:!0});if(s)throw s;let r=await Promise.all((t||[]).map(async e=>{let{data:t}=await n.N.from("profiles").select("full_name, avatar_url").eq("id",e.user_id).single();return{...e,user_name:t?.full_name||"User",user_avatar:t?.avatar_url||""}}));d(r)}catch(e){console.error("Error loading comments:",e)}},[e]);(0,a.useEffect)(()=>{g()},[g]);let p=async r=>{if(r.preventDefault(),m.trim()){h(!0);try{let{error:r}=await n.N.from("comments").insert({post_id:e,user_id:t,content:m.trim()});if(r)throw r;await n.N.rpc("increment_comments",{post_id:e}),x(""),await g(),s()}catch(e){console.error("Error posting comment:",e)}finally{h(!1)}}},f=(e,t)=>{t.stopPropagation(),l.push(`/user/${e}`)};return(0,r.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,r.jsx)("div",{className:"space-y-4 mb-4",children:0===c.length?(0,r.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"No comments yet. Be the first to comment!"}):c.map(e=>{let t,s,a,n;return(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("div",{className:"cursor-pointer hover:opacity-80 transition",onClick:t=>f(e.user_id,t),children:e.user_avatar?(0,r.jsx)(o.default,{src:e.user_avatar,alt:e.user_name,width:32,height:32,className:"rounded-full object-cover"}):(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#162f16] text-white flex items-center justify-center text-sm font-semibold",children:e.user_name.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,r.jsx)("p",{className:"font-medium text-sm text-gray-900 cursor-pointer hover:underline",onClick:t=>f(e.user_id,t),children:e.user_name}),(0,r.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:e.content})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1 ml-3",children:(t=new Date(e.created_at),n=Math.floor((a=Math.floor((s=Math.floor((new Date().getTime()-t.getTime())/6e4))/60))/24),s<1?"Just now":s<60?`${s}m ago`:a<24?`${a}h ago`:`${n}d ago`)})]})]},e.id)})}),(0,r.jsxs)("form",{onSubmit:p,className:"flex gap-3",children:[(0,r.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),placeholder:"Write a comment...",className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#162f16] text-sm"}),(0,r.jsx)("button",{type:"submit",disabled:u||!m.trim(),className:"px-4 py-2 bg-[#162f16] text-white rounded-lg text-sm font-medium hover:bg-[#0f2310] transition disabled:opacity-50",children:u?"Posting...":"Post"})]})]})}function c({post:e,currentUserId:t,onUpdate:s,compact:c=!1}){let d,m,x,u=(0,i.useRouter)(),[h,g]=(0,a.useState)(!1),[p,f]=(0,a.useState)(!1),[v,j]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!1),[N,w]=(0,a.useState)(!1),[k,_]=(0,a.useState)(e.likes_count),[C,L]=(0,a.useState)(e.is_liked),[S,M]=(0,a.useState)(e.comments_count),I=e.user_id===t,$=async()=>{if(p)return;f(!0);let r=!C,a=r?k+1:k-1;L(r),_(a);try{C?(await n.N.from("post_likes").delete().eq("post_id",e.id).eq("user_id",t),await n.N.rpc("decrement_likes",{post_id:e.id})):(await n.N.from("post_likes").insert({post_id:e.id,user_id:t}),await n.N.rpc("increment_likes",{post_id:e.id})),s()}catch(e){console.error("Error toggling like:",e),L(!r),_(k)}finally{f(!1)}},z=async r=>{if(!v&&e.event){j(!0);try{let a=e.event.id;if(e.event.user_rsvp===r){await n.N.from("event_rsvps").delete().eq("event_id",a).eq("user_id",t);let s="going"===r?"going_count":"interested_count";await n.N.from("events").update({[s]:Math.max(0,e.event[s]-1)}).eq("id",a)}else if(await n.N.from("event_rsvps").upsert({event_id:a,user_id:t,status:r}),e.event.user_rsvp){let t="going"===e.event.user_rsvp?"going_count":"interested_count",s="going"===r?"going_count":"interested_count";await n.N.from("events").update({[t]:Math.max(0,e.event[t]-1),[s]:e.event[s]+1}).eq("id",a)}else{let t="going"===r?"going_count":"interested_count";await n.N.from("events").update({[t]:e.event[t]+1}).eq("id",a)}s()}catch(e){console.error("Error updating RSVP:",e)}finally{j(!1)}}},U=async()=>{if(!b){y(!0);try{let{error:r}=await n.N.from("posts").delete().eq("id",e.id).eq("user_id",t);if(r)throw r;s(),w(!1)}catch(e){console.error("Error deleting post:",e),alert("Failed to delete post. Please try again.")}finally{y(!1)}}};return(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 hover:shadow-md transition",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition min-w-0",onClick:t=>{t.stopPropagation(),u.push(`/user/${e.user_id}`)},children:[e.user_avatar?(0,r.jsx)(o.default,{src:e.user_avatar,alt:e.user_name,width:40,height:40,className:"w-10 h-10 rounded-full object-cover"}):(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-[#162f16] text-white flex items-center justify-center font-semibold",children:e.user_name.charAt(0).toUpperCase()}),(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900 text-xs hover:underline line-clamp-1",children:e.user_name}),e.user_occupation&&(0,r.jsx)("p",{className:"text-xs text-gray-600 line-clamp-1",children:e.user_occupation}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:(d=new Date(e.created_at),x=Math.floor((m=Math.floor((new Date().getTime()-d.getTime())/36e5))/24),m<1?"Just now":m<24?`${m}h ago`:x<7?`${x}d ago`:d.toLocaleDateString())})]})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:I&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>w(!N),className:"p-2 text-gray-400 hover:text-red-600 transition","aria-label":"Delete post",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),N&&(0,r.jsxs)("div",{className:"absolute right-0 top-10 bg-white rounded-lg shadow-lg border border-gray-200 p-4 z-10 w-64",children:[(0,r.jsx)("p",{className:"text-sm text-gray-700 mb-3",children:"Are you sure you want to delete this post?"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:U,disabled:b,className:"flex-1 px-3 py-2 bg-red-600 text-white rounded-md text-sm font-medium hover:bg-red-700 transition disabled:opacity-50",children:b?"Deleting...":"Delete"}),(0,r.jsx)("button",{onClick:()=>w(!1),className:"flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-md text-sm font-medium hover:bg-gray-200 transition",children:"Cancel"})]})]})]})})]}),(0,r.jsx)("h3",{className:`text-l sm:text-base font-regular text-gray-900 mb-2 ${c?"line-clamp-2":""}`,children:e.title}),(0,r.jsx)("p",{className:`text-xs sm:text-xs text-gray-700 mb-4 whitespace-pre-wrap break-words ${c?"line-clamp-3":""}`,children:e.content}),e.event&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700 mb-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,r.jsx)("span",{className:"font-medium",children:new Date(e.event.event_date).toLocaleString()})]}),e.event.location&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700 mb-2",children:[(0,r.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,r.jsx)("span",{children:e.event.location})]}),e.event.meeting_link&&(0,r.jsxs)("a",{href:e.event.meeting_link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-[#162f16] hover:underline mb-3",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),(0,r.jsx)("span",{children:"Join Meeting"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("button",{onClick:()=>z("going"),disabled:v,className:`px-4 py-2 rounded-lg text-sm font-medium transition ${"going"===e.event.user_rsvp?"bg-[#162f16] text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:["Going (",e.event.going_count,")"]}),(0,r.jsxs)("button",{onClick:()=>z("interested"),disabled:v,className:`px-4 py-2 rounded-lg text-sm font-medium transition ${"interested"===e.event.user_rsvp?"bg-[#162f16] text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:["Interested (",e.event.interested_count,")"]})]})]}),e.tags&&e.tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:e.tags.map((e,t)=>(0,r.jsxs)("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-medium",children:["#",e]},t))}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-4 sm:gap-6 pt-4 border-t border-gray-200",children:[(0,r.jsxs)("button",{onClick:$,disabled:p,className:"flex items-center gap-2 text-gray-600 hover:text-[#162f16] transition",children:[(0,r.jsx)("svg",{className:`w-5 h-5 ${C?"fill-[#162f16] text-[#162f16]":"fill-none"}`,stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,r.jsx)("span",{className:"text-sm font-medium",children:k})]}),(0,r.jsxs)("button",{onClick:()=>g(!h),className:"flex items-center gap-2 text-gray-600 hover:text-[#162f16] transition",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,r.jsx)("span",{className:"text-sm font-medium",children:S})]}),(0,r.jsxs)("button",{onClick:()=>{let t=`${window.location.origin}/community?post=${e.id}`;navigator.clipboard.writeText(t),alert("Link copied to clipboard!")},className:"flex items-center gap-2 text-gray-600 hover:text-[#162f16] transition",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Share"})]})]}),h&&(0,r.jsx)(l,{postId:e.id,currentUserId:t,onUpdate:()=>{M(e=>e+1),s()}})]})}},9145:(e,t,s)=>{s.d(t,{A:()=>m});var r=s(5155),a=s(2115),n=s(1142),i=s(5772),o=s(8500),l=s.n(o),c=s(3321);let d={src:"/_next/static/media/logo.35068b4e.svg",height:46,width:159,blurWidth:0,blurHeight:0};function m({onAuthClick:e}){let t=(0,c.useRouter)(),s=(0,c.usePathname)(),[o,m]=(0,a.useState)(null),[x,u]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>{n.N.auth.getSession().then(({data:{session:e}})=>{m(e?.user??null)});let{data:{subscription:e}}=n.N.auth.onAuthStateChange((e,t)=>{m(t?.user??null)});return()=>e.unsubscribe()},[]);let p=async()=>{await n.N.auth.signOut(),u(!1),t.push("/")},f=()=>{o?t.push("/community"):e("sign_in"),g(!1)},v=()=>o?.user_metadata?.avatar_url||"";return(0,r.jsxs)("header",{className:"py-6 bg-white border-b border-gray-100 sticky top-0 z-40",children:[(0,r.jsxs)("div",{className:"container mx-auto flex items-center justify-between px-4",children:[(0,r.jsx)("div",{className:"flex items-center gap-3",children:(0,r.jsx)(l(),{href:"/",children:(0,r.jsx)(i.default,{src:d,alt:"Progrize logo",className:"w-auto h-8"})})}),(0,r.jsxs)("nav",{className:"hidden md:flex items-center gap-10 text-sm tracking-wider text-gray-600",children:[(0,r.jsx)("a",{href:"#features",className:"hover:text-[#162f16] transition",children:"Features"}),(0,r.jsx)("a",{href:"#testimonials",className:"hover:text-[#162f16] transition",children:"Testimonials"}),(0,r.jsx)("a",{href:"/upcoming",className:"hover:text-[#162f16] transition",children:"Resources"}),(0,r.jsx)("button",{onClick:f,className:`hover:text-[#162f16] transition ${"/community"===s?"text-[#162f16] font-semibold":""}`,children:"Community"})]}),(0,r.jsx)("div",{className:"hidden md:flex items-center gap-4",children:o?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>u(!x),className:"flex items-center gap-3 hover:opacity-80 transition",children:[v()?(0,r.jsx)(i.default,{src:v(),alt:"Profile",width:40,height:40,className:"rounded-full object-cover"}):(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-[#162f16] text-white flex items-center justify-center font-semibold",children:o?.user_metadata?.first_name?o.user_metadata.first_name.charAt(0).toUpperCase():o?.email?o.email.charAt(0).toUpperCase():"U"}),(0,r.jsx)("span",{className:"text-gray-900 font-medium",children:o?.user_metadata?.first_name?`${o.user_metadata.first_name} ${o.user_metadata.last_name||""}`.trim():o?.email?o.email.split("@")[0]:"User"}),(0,r.jsx)("svg",{className:`w-4 h-4 text-gray-600 transition-transform ${x?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[(0,r.jsx)("button",{onClick:()=>{t.push("/profile"),u(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"Profile"}),(0,r.jsx)("button",{onClick:()=>{t.push("/community"),u(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"Community"}),(0,r.jsx)("button",{onClick:()=>u(!1),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"Settings"}),(0,r.jsx)("hr",{className:"my-2 border-gray-200"}),(0,r.jsx)("button",{onClick:p,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-50",children:"Sign Out"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>e("sign_in"),className:"px-4 py-2 text-gray-700 hover:text-gray-900 transition",children:"Sign In"}),(0,r.jsx)("button",{onClick:()=>e("sign_up"),className:"px-4 py-2 bg-[#162f16] text-white rounded-md hover:bg-[#0f2310] transition",children:"Sign Up"})]})}),(0,r.jsx)("button",{onClick:()=>g(!h),"aria-label":"Open menu",className:"md:hidden p-2",children:h?(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}):(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})})]}),(0,r.jsx)("div",{className:`md:hidden transition-all duration-300 overflow-hidden ${h?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:(0,r.jsxs)("nav",{className:"flex flex-col gap-4 px-6 py-4 bg-white border-t border-gray-200 text-sm tracking-wide",children:[(0,r.jsx)("a",{href:"#features",className:"py-2 hover:text-[#162f16]",onClick:()=>g(!1),children:"Features"}),(0,r.jsx)("a",{href:"#testimonials",className:"py-2 hover:text-[#162f16]",onClick:()=>g(!1),children:"Testimonials"}),(0,r.jsx)("a",{href:"/upcoming",className:"py-2 hover:text-[#162f16]",onClick:()=>g(!1),children:"Resources"}),(0,r.jsx)("button",{onClick:f,className:"text-left py-2 hover:text-[#162f16]",children:"Community"}),o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>{t.push("/profile"),g(!1)},className:"text-left py-2 hover:text-[#162f16]",children:"Profile"}),(0,r.jsx)("button",{onClick:p,className:"text-left py-2 text-red-600 hover:text-red-700",children:"Sign Out"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>{e("sign_in"),g(!1)},className:"text-left py-2 hover:text-[#162f16]",children:"Sign In"}),(0,r.jsx)("button",{onClick:()=>{e("sign_up"),g(!1)},className:"mt-2 px-4 py-2 bg-[#162f16] text-white text-center rounded-md",children:"Sign Up"})]})]})})]})}}}]);